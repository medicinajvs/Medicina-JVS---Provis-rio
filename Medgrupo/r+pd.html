<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plataforma de Estudos por Especialidade</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c; /* Dark background */
            color: #e2e8f0; /* Light text */
            overflow-x: hidden;
        }
        .module-list-item {
            background-color: #2d3748; /* Slightly lighter dark shade */
            border-radius: 0.5rem;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            cursor: pointer;
            margin-bottom: 0.75rem;
            border: 1px solid #4a5568; /* Subtle border */
        }
        .module-list-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px -2px rgba(0, 0, 0, 0.2), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        .module-list-item.active {
            border-left: 4px solid #63b3ed; /* Blue accent for active */
            background-color: #4a5568; /* Darker shade for active */
        }
        .details-section-container {
            background-color: #2d3748;
            border-radius: 0.5rem;
            border: 1px solid #4a5568;
            height: calc(100vh - 84px); /* Full height minus header and padding */
            display: flex;
            flex-direction: column;
            overflow-y: auto; /* Scroll for content list */
            scrollbar-width: thin;
            scrollbar-color: #718096 #2d3748;
        }
        .details-section-container::-webkit-scrollbar { width: 6px; }
        .details-section-container::-webkit-scrollbar-track { background: #2d3748; border-radius: 10px; }
        .details-section-container::-webkit-scrollbar-thumb { background: #718096; border-radius: 10px; }
        .details-section-container::-webkit-scrollbar-thumb:hover { background: #a0aec0; }

        .content-viewer-wrapper { /* Parent for player and overlay topics menu */
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            height: 0;
            background-color: #000;
            border-radius: 0.375rem;
            overflow: hidden; /* Important for absolute children if they are larger */
            flex-shrink: 0;
        }
        #player-div, #module-content-viewer { /* Player and GDrive iframe */
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        #details-content-list-container { flex-grow: 1; overflow-y: auto; min-height: 120px; }
        .content-item { border-bottom: 1px solid #4a5568; transition: background-color 0.15s ease-in-out; }
        .content-item:hover { background-color: #4a5568; }
        .content-item:last-child { border-bottom: none; }
        .content-item.active-content { background-color: #3b82f6; color: white; }
        .content-item.active-content .content-title,
        .content-item.active-content .content-status,
        .content-item.active-content svg { color: white; stroke: white; }

        .module-icon-box { width: 60px; height: 60px; border-radius: 0.375rem; display: flex; align-items: center; justify-content: center; text-align: center; font-size: 0.875rem; color: white; font-weight: 600; flex-shrink: 0; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #2d3748; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #718096; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #a0aec0; }
        .specialty-header { font-size: 0.875rem; font-weight: 700; color: #cbd5e1; margin-bottom: 0.75rem; padding-top: 0.5rem; text-align: center; text-transform: uppercase; border-bottom: 1px solid #4a5568; padding-bottom: 0.25rem; }
        .label-icon-container { min-height: 2.25rem; display: flex; align-items: center; justify-content: center; }
        .item-count { font-size: 0.875rem; font-weight: 600; color: #e2e8f0; display: block; margin-top: 0.125rem; text-align: center; }
        .module-title { text-align: center; }
        
        /* Styles for the topics menu - overlay */
        #topics-menu {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0; /* Full height of parent */
            width: 300px; /* Example fixed width, adjust as needed */
            background-color: rgba(45, 55, 72, 0.95); /* #2d3748 with opacity */
            z-index: 20; /* Below toggle button, above player */
            padding: 1rem; /* Tailwind p-4 */
            border-left: 1px solid #4a5568; /* Optional separator */
            overflow-y: auto;
        }
        .topics-item { 
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.5rem 0.3rem; 
            border-bottom: 1px solid #4a5568; 
            color: #cbd5e1; 
        }
        .topics-item:last-child { border-bottom: none; }
        .topics-item.clickable { cursor: pointer; }
        .topics-item.clickable:hover { background-color: #4a5568; }
        .topics-item.clickable:hover .topic-title,
        .topics-item.clickable:hover .topic-time { color: #90cdf4; } 
        .topics-item.clickable:hover .play-icon { fill: #90cdf4; stroke: #90cdf4; }


        .topic-title-container {
            display: flex;
            align-items: center;
            flex-grow: 1;
            margin-right: 0.5rem; 
        }
        .play-icon {
            width: 1rem; 
            height: 1rem; 
            margin-right: 0.5rem; 
            fill: #9ca3af; /* Fill for solid icon */
            stroke: #9ca3af; /* Keep stroke for consistency or remove if fill is enough */
        }
        .topic-title {
            font-size: 0.875rem; 
            font-weight: 500; 
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .topic-time { 
            font-size: 0.75rem; 
            color: #9ca3af; 
            flex-shrink: 0;
        }

        /* Gradient classes for module icons */
        .gradient-gray { background-image: linear-gradient(to bottom right, #6b7280, #4b5563); } 
        .gradient-red-pink { background-image: linear-gradient(to bottom right, #ef4444, #ec4899); } 
        .gradient-sky-blue { background-image: linear-gradient(to bottom right, #38bdf8, #0ea5e9); } 
        .gradient-amber-orange { background-image: linear-gradient(to bottom right, #f59e0b, #f97316); } 
        .gradient-lime-emerald { background-image: linear-gradient(to bottom right, #84cc16, #10b981); } 
        .gradient-fuchsia-pink-alt { background-image: linear-gradient(to bottom right, #c026d3, #db2777); } 
        .gradient-yellow-orange-dark { background-image: linear-gradient(to bottom right, #eab308, #d97706); } 
        .gradient-violet-grape { background-image: linear-gradient(to bottom right, #8b5cf6, #7c3aed); } 
        .gradient-cyan-sky { background-image: linear-gradient(to bottom right, #06b6d4, #0ea5e9); } 
        .gradient-indigo-deepPurple { background-image: linear-gradient(to bottom right, #6366f1, #8b5cf6); } 
        .gradient-lightGreen-green { background-image: linear-gradient(to bottom right, #86efac, #22c55e); } 
        .gradient-blueGray-slate { background-image: linear-gradient(to bottom right, #64748b, #475569); } 
        .gradient-cyan-lightBlue { background-image: linear-gradient(to bottom right, #22d3ee, #38bdf8); } 
        .gradient-indigo-violet { background-image: linear-gradient(to bottom right, #6366f1, #7c3aed); } 
        .gradient-magenta-purple { background-image: linear-gradient(to bottom right, #d946ef, #a855f7); } 
        .gradient-green-teal { background-image: linear-gradient(to bottom right, #10b981, #14b8a6); }  
        .gradient-pink-purple { background-image: linear-gradient(to bottom right, #ec4899, #a855f7); } 
        .gradient-rose-fuchsia { background-image: linear-gradient(to bottom right, #f43f5e, #d946ef); } 
        .gradient-yellow-amber { background-image: linear-gradient(to bottom right, #f59e0b, #facc15); } 
        .gradient-teal-cyan { background-image: linear-gradient(to bottom right, #14b8a6, #06b6d4); } 

        /* Responsive adjustments for overall layout */
        @media (max-width: 1023px) { 
            .main-content-flex { flex-direction: column; height: auto; }
            #modules-list-column { width: 100%; max-height: 45vh; margin-bottom: 1rem; height: auto; }
            #details-column { width: 100%; height: auto; }
            .details-section-container { height: auto; max-height: none; }
            .content-viewer-wrapper { min-height: 250px; } /* Ensure player has some height */
            #details-content-list-container{ max-height: 200px; height: auto; }
            #topics-menu {
                width: 80%; 
                max-width: 300px; /* Ensure overlay menu is not too wide on mobile */
            }
        }
    </style>
</head>
<body class="text-gray-200">

    <header class="bg-gray-800 shadow-md py-3 px-4 sm:px-6 lg:px-8 sticky top-0 z-20">
        <div class="container mx-auto flex justify-between items-center max-w-full px-4">
            <h1 class="text-xl sm:text-2xl font-bold text-gray-100">Plataforma de Estudos</h1>
            <div class="relative">
                <input type="search" id="search-input" placeholder="Pesquisar módulos ou especialidades..." class="pl-10 pr-4 py-2 rounded-lg border bg-gray-700 border-gray-600 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <svg class="w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
            </div>
        </div>
    </header>

    <main class="container mx-auto p-4 sm:p-6 lg:px-8 max-w-full" style="height: calc(100vh - 60px);">
        <div class="flex flex-col lg:flex-row gap-6 main-content-flex h-full">
            <div id="modules-list-column" class="w-full lg:w-1/3 xl:w-1/4 h-full overflow-hidden">
                <div id="modules-list-container" class="custom-scrollbar pr-2 h-full overflow-y-auto">
                    </div>
            </div>

            <div id="details-column" class="w-full lg:w-2/3 xl:w-3/4 h-full">
                <div id="details-panel" class="details-section-container p-4 sm:p-6">
                    
                    <div class="content-viewer-wrapper w-full mb-4">
                        <div id="player-div"></div>
                        <iframe 
                            id="module-content-viewer" 
                            class="hidden"
                            src="about:blank" 
                            title="Visualizador de Conteúdo do Módulo"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            referrerpolicy="strict-origin-when-cross-origin"
                            allowfullscreen>
                        </iframe>
                        <button id="toggle-topics-button" title="Opções" class="absolute top-2 right-2 z-30 bg-gray-700 hover:bg-gray-600 text-white text-sm py-1.5 px-3 rounded-md flex items-center focus:outline-none hidden">
                            <span class="mr-2">Opções</span>
                            <svg id="topics-icon-open" xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
                            </svg>
                            <svg id="topics-icon-close" xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                        <div id="topics-menu" class="custom-scrollbar hidden"> 
                             <h4 class="text-base font-semibold text-gray-100 mb-3 sticky top-0 py-2" style="background-color: rgba(45, 55, 72, 0.95);">Assuntos desse vídeo</h4>
                             <ul id="topics-list" class="space-y-1">
                                 </ul>
                             <p id="no-topics-message" class="text-gray-400 text-xs hidden p-2">Nenhum tópico disponível para esta aula.</p>
                        </div>
                    </div>
                                    
                    <h3 id="materials-header" class="text-sm font-semibold text-gray-300 mb-2 flex-shrink-0 text-center">MATERIAIS DO MÓDULO:</h3>
                    <div id="details-content-list-container" class="custom-scrollbar">
                        <div id="details-content-list">
                             <p class="text-gray-400 initial-details-message">Selecione um módulo para ver os materiais.</p>
                             </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <template id="module-list-item-template">
        <div class="module-list-item p-3 flex items-center gap-3">
            <div class="module-icon-box flex-shrink-0">
                </div>
            <div class="flex-grow overflow-hidden flex flex-col items-center"> 
                <h3 class="module-title relative text-sm font-semibold text-gray-100" style="white-space: normal; overflow-wrap: break-word; line-height: 1.4; left: -36px;">Título do Módulo</h3>
                <div class="mt-2 grid grid-cols-3 gap-x-2 sm:gap-x-3 w-full"> 
                    <div class="progress-item text-center">
                        <div class="label-icon-container text-xs text-gray-400">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1 text-blue-400"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                            Aulas
                        </div>
                        <span class="item-count aulas-count">0</span>
                    </div>
                    <div class="progress-item text-center">
                        <div class="label-icon-container text-xs text-gray-400">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1 text-green-400"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>
                            Apostilas
                        </div>
                        <span class="item-count apostilas-count">0</span>
                    </div>
                    <div class="progress-item text-center"> 
                        <div class="label-icon-container text-xs text-gray-400">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1 text-yellow-400"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></svg>
                            Aulas Bônus
                        </div>
                        <span class="item-count aulasBonus-count">0</span>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template id="content-item-template">
        <div class="content-item py-2.5 px-2 hover:bg-gray-700 rounded-md cursor-pointer">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <span class="content-title text-sm text-gray-300 font-medium truncate">Título do Conteúdo</span>
                </div>
                <span class="content-status text-xs text-gray-400"></span>
            </div>
        </div>
    </template>
    
    <script src="https://www.youtube.com/iframe_api"></script> <script>
        // Constants for DOM elements
        const modulesListContainer = document.getElementById('modules-list-container');
        const moduleListItemTemplate = document.getElementById('module-list-item-template');
        const gDriveViewer = document.getElementById('module-content-viewer'); 
        const playerDiv = document.getElementById('player-div'); 
        const detailsContentList = document.getElementById('details-content-list');
        const contentItemTemplate = document.getElementById('content-item-template');
        const searchInput = document.getElementById('search-input');
        const materialsHeader = document.getElementById('materials-header'); 
        const toggleTopicsButton = document.getElementById('toggle-topics-button');
        const topicsMenuDiv = document.getElementById('topics-menu');
        const topicsListUl = document.getElementById('topics-list'); 
        const noTopicsMessage = document.getElementById('no-topics-message');
        const topicsIconOpen = document.getElementById('topics-icon-open');
        const topicsIconClose = document.getElementById('topics-icon-close');

        // Global state variables
        let currentModuleId = 0;
        let ytPlayer; // This will hold the current YouTube player instance
        let youtubeApiReady = false;
        let activeModuleCard = null; 
        let activeContentItem = null; 

        // Icons for content types in the details list
        const contentIcons = { 
            aulas: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-400 mr-2 flex-shrink-0"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>',
            apostilas: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-400 mr-2 flex-shrink-0"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>',
            aulasbonus: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-yellow-400 mr-2 flex-shrink-0"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></svg>', 
        };
        const subItemOrder = ['aulas', 'apostilas', 'aulasBonus']; 

        // Gradient classes for module icons
        const gradientClasses = [
            'gradient-red-pink', 'gradient-sky-blue', 'gradient-amber-orange', 'gradient-lime-emerald',
            'gradient-fuchsia-pink-alt', 'gradient-yellow-orange-dark', 'gradient-violet-grape', 'gradient-cyan-sky',
            'gradient-indigo-deepPurple', 'gradient-lightGreen-green', 'gradient-blueGray-slate', 'gradient-cyan-lightBlue',
            'gradient-indigo-violet', 'gradient-magenta-purple', 'gradient-green-teal', 'gradient-pink-purple',
            'gradient-rose-fuchsia', 'gradient-yellow-amber', 'gradient-teal-cyan', 'gradient-gray'
        ];
        
        // Sample topics to be used as placeholders - kept for aulas/aulasBonus that don't have specific topics defined
        const genericSampleTopics = [];

        // --- YouTube API and Player Functions ---
        function onYouTubeIframeAPIReady() {
            youtubeApiReady = true;
            console.log("YouTube IFrame API Ready");
        }

        function destroyYouTubePlayer() {
            if (ytPlayer && typeof ytPlayer.destroy === 'function') {
                console.log("Destroying previous YouTube player instance");
                ytPlayer.destroy();
            }
            ytPlayer = null; // Reset the global player variable
            if (playerDiv) playerDiv.innerHTML = ''; 
        }
        
        function loadYouTubeVideo(videoId, topicsData) {
            destroyYouTubePlayer(); 
            gDriveViewer.classList.add('hidden'); 
            gDriveViewer.src = 'about:blank';    
            playerDiv.classList.remove('hidden'); 
            playerDiv.innerHTML = ''; 

            // Initial population for button visibility, topics won't be clickable yet.
            // Pass null for playerInstance as it's not ready.
            if (topicsData && topicsData.length > 0) {
                populateTopicsMenu(topicsData, true, null); 
            } else {
                clearTopicsMenu('Nenhum tópico definido para esta aula.'); 
            }

            if (videoId && (videoId.startsWith("ID_YOUTUBE_") || videoId.startsWith("LINK_GOOGLE_DRIVE_") )) { 
                playerDiv.innerHTML = `<div class="w-full h-full flex items-center justify-center text-gray-400 p-4">Substitua o placeholder '${videoId}' pela URL real do conteúdo.</div>`;
                return;
            }
            
            if (!youtubeApiReady) {
                console.warn("YouTube API not ready. Player creation deferred. Waiting...");
                playerDiv.innerHTML = '<p class="text-gray-400 p-4">Carregando API do YouTube...</p>';
                const checkReadyAndLoad = () => {
                    if (youtubeApiReady) {
                        console.log("YouTube API is now ready. Proceeding to load video.");
                        loadYouTubeVideo(videoId, topicsData); // Re-call the function now that API is ready
                    } else {
                        console.log("Still waiting for YouTube API...");
                        setTimeout(checkReadyAndLoad, 500); 
                    }
                };
                setTimeout(checkReadyAndLoad, 500);
                return;
            }
            
            console.log("Attempting to create YouTube player for videoId:", videoId);
            // Assign to global ytPlayer. The specific instance is passed to populateTopicsMenu via onReady.
            ytPlayer = new YT.Player('player-div', { 
                height: '100%', 
                width: '100%', 
                videoId: videoId,
                playerVars: { 
                    'playsinline': 1, 
                    'autoplay': 1, 
                    'rel': 0,
                    'controls': 1,        
                    'modestbranding': 1,  
                    'iv_load_policy': 3,  
                    'fs': 1               
                }, 
                events: {
                    'onReady': (event) => { 
                        console.log("YouTube Player Ready. Video ID:", videoId, "Player instance:", event.target);
                        // Re-populate topics with the now ready player instance to make them clickable
                        if (topicsData && topicsData.length > 0) {
                            populateTopicsMenu(topicsData, true, event.target); // Pass the specific player instance
                        }
                    },
                    'onError': (event) => {
                        console.error("YouTube Player Error:", event.data, "Video ID:", videoId);
                        playerDiv.innerHTML = `<p class="text-red-400 p-4">Erro ao carregar o vídeo do YouTube. Verifique o ID do vídeo ('${videoId}') ou a conexão.</p>`;
                    }
                }
            });
        }

        // --- Utility Functions ---
        const gDriveTransformLink = (link) => { 
            if (link && typeof link === 'string' && link.includes('drive.google.com') && !link.startsWith("LINK_GOOGLE_DRIVE_")) { 
                return link.replace('/view?usp=drive_link', '/preview?usp=drive_link')
                           .replace('/view?usp=sharing', '/preview?usp=sharing');
            }
            return link; 
        };

        function parseYouTubeVideoId(url) {
            if (!url) return null;
            const patterns = [
                /(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,
                /googleusercontent\.com\/youtube\.com\/(\d+)/, 
                /^ID_YOUTUBE_AULA(?:_BONUS)?_MODULO_([a-zA-Z0-9_]+)_(\d+)$/ 
            ];
            for (const pattern of patterns) {
                const match = url.match(pattern);
                if (match && match[1]) {
                    if (pattern.source.includes('googleusercontent')) { 
                        return match[1]; 
                    } else if (pattern.source.startsWith("^ID_YOUTUBE_AULA")){ 
                        return url; 
                    } else if (match[1].length === 11) { 
                        return match[1]; 
                    }
                }
            }
            return null;
        }
        
        function parseTimeToSeconds(timeStr) { 
            if (!timeStr || typeof timeStr !== 'string') return 0;
            const parts = timeStr.split(':').map(Number);
            let seconds = 0;
            if (parts.length === 3) { 
                seconds = parts[0] * 3600 + parts[1] * 60 + parts[2];
            } else if (parts.length === 2) { 
                seconds = parts[0] * 60 + parts[1];
            } else if (parts.length === 1) { 
                seconds = parts[0];
            }
            return seconds;
        }

        // --- Module and Content Creation ---
        const createModule = (specialty, shortcode, title, subtitle, contentCounts, iconType, contentLinks) => {
            currentModuleId++; 
            
            const aulasPlaceholders = Array(contentCounts.aulas).fill(null).map((_, i) => {
                const linkData = contentLinks.aulas && contentLinks.aulas[i];
                let url, type, topics, displayTitle;

                if (linkData && typeof linkData === 'object') { 
                    url = linkData.url || `ID_YOUTUBE_AULA_MODULO_${title.replace(/\s+/g, '_')}_${i + 1}`;
                    topics = linkData.topics || genericSampleTopics; 
                    displayTitle = linkData.customTitle || `Aula ${i + 1}`;
                    
                    const ytId = parseYouTubeVideoId(url);
                    if (ytId && (ytId.length === 11 || ytId.startsWith("ID_YOUTUBE_") || !isNaN(parseInt(ytId)))) {
                        url = ytId; 
                        type = 'youtube';
                    } else { 
                        url = gDriveTransformLink(url);
                        type = 'gdrive'; 
                    }
                } else { 
                    displayTitle = `Aula ${i + 1}`;
                    url = (typeof linkData === 'string' && linkData) ? linkData : `ID_YOUTUBE_AULA_MODULO_${title.replace(/\s+/g, '_')}_${i + 1}`;
                    const ytId = parseYouTubeVideoId(url);
                     if (ytId && (ytId.length === 11 || ytId.startsWith("ID_YOUTUBE_") || !isNaN(parseInt(ytId)))) {
                        type = 'youtube';
                        url = ytId;
                    } else {
                        type = 'gdrive';
                        url = gDriveTransformLink(url);
                    }
                    topics = genericSampleTopics; 
                }
                return { title: displayTitle, url: url, type: type, topics: topics };
            });

            const aulasBonusPlaceholders = Array(contentCounts.aulasBonus).fill(null).map((_, i) => {
                const linkData = contentLinks.aulasBonus && contentLinks.aulasBonus[i];
                let url, type, topics, displayTitle;

                if (linkData && typeof linkData === 'object') {
                    url = linkData.url || `LINK_GOOGLE_DRIVE_AULA_BONUS_MODULO_${title.replace(/\s+/g, '_')}_${i + 1}`; // Default to GDrive placeholder
                    topics = linkData.topics || []; // Default to empty topics for GDrive type
                    displayTitle = linkData.customTitle || `Aula Bônus ${i + 1}`;
                    
                    const ytId = parseYouTubeVideoId(url);
                     // If it's explicitly a YouTube ID or a YouTube placeholder, treat as YouTube
                    if (ytId && (ytId.length === 11 || ytId.startsWith("ID_YOUTUBE_")) && !url.startsWith("LINK_GOOGLE_DRIVE_")) {
                        url = ytId;
                        type = 'youtube';
                        topics = linkData.topics || genericSampleTopics; // YouTube can have generic topics if specific are missing
                    } else { // Otherwise, treat as Google Drive
                        url = gDriveTransformLink(url);
                        type = 'gdrive';
                    }
                } else { // Fallback: No specific linkData object, create GDrive placeholder
                    displayTitle = `Aula Bônus ${i + 1}`;
                    url = (typeof linkData === 'string' && linkData) ? gDriveTransformLink(linkData) : `LINK_GOOGLE_DRIVE_AULA_BONUS_MODULO_${title.replace(/\s+/g, '_')}_${i + 1}`;
                    type = 'gdrive';
                    topics = [];
                }
                return { title: displayTitle, url: url, type: type, topics: topics };
            });

            const apostilasPlaceholders = Array(contentCounts.apostilas).fill(null).map((_, i) => {
                const linkData = contentLinks.apostilas && contentLinks.apostilas[i];
                let url, displayTitle;

                if (linkData && typeof linkData === 'object') {
                    url = linkData.url || `LINK_GOOGLE_DRIVE_APOSTILA_MODULO_${title.replace(/\s+/g, '_')}_${i + 1}`;
                    displayTitle = linkData.customTitle || `Apostila ${i + 1}`;
                } else {
                    displayTitle = `Apostila ${i + 1}`;
                     url = (typeof linkData === 'string' && linkData) ? linkData : `LINK_GOOGLE_DRIVE_APOSTILA_MODULO_${title.replace(/\s+/g, '_')}_${i + 1}`;
                }
                return { 
                    title: displayTitle, 
                    url: gDriveTransformLink(url), 
                    type: 'gdrive', 
                    topics: [] 
                };
            });

            return { 
                specialty, id: currentModuleId, shortcode, title, subtitle, iconType, 
                content: { aulas: aulasPlaceholders, apostilas: apostilasPlaceholders, aulasBonus: aulasBonusPlaceholders },
                contentCounts: contentCounts 
            };
        };
        
        // --- Data Definition ---
        // User should manually populate contentLinks.aulas, .apostilas, .aulasBonus with objects
        // containing url, topics (if applicable), and customTitle (if desired).
        // createModule will use these or generate defaults if arrays are empty/sparse.
        let gradientIconIndex = 0;
        const newSpecialtiesWithModules = [
            {
                name: "Alergia e Imunologia I - Alergias Alimentares e Anafilaxia",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Alergia e Imunologia I",
                        shortcode: "AI&IM I",
                        subtitle: "",
                        contentCounts: { aulas: 8, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1XnZQ0GpT4IwA2dhxpDbz1kQEQNfa1r6j/view?usp=sharing", customTitle: "Aula 01 - Alergia Alimentar: Introdução e Diagnóstico" },
                                { url: "https://drive.google.com/file/d/1XnRTe5YXIrwxxlCfLUlAkBjV4i4M5ubv/view?usp=sharing", customTitle: "Aula 02 - Alergia Alimentar: Mecanismos e Fisiopatologia" },
                                { url: "https://drive.google.com/file/d/1XNz3_kYQSwVIOffkexLrcIbxmC-i3OEm/view?usp=sharing", customTitle: "Aula 03 - Anafilaxia: Manifestações Clínicas e Diagnóstico" },
                                { url: "https://drive.google.com/file/d/1XmL0qL9MDpkq60xdjAegPI6dcqpWNMmE/view?usp=sharing", customTitle: "Aula 04 - Anafilaxia: Fatores Desencadeantes e Prevenção" },
                                { url: "https://drive.google.com/file/d/1Xqju_bgg_pP86z3_SOlFR-d-Tw5Zy6xQ/view?usp=sharing", customTitle: "Aula 05 - Dermatite Atópica: Diagnóstico e Manejo" },
                                { url: "https://drive.google.com/file/d/1Xa0Mq2ZGTfp-pWaA7ZPGjD7wVwH4txnH/view?usp=sharing", customTitle: "Aula 06 - Anafilaxia: Mecanismos e Fisiopatologia" },
                                { url: "https://drive.google.com/file/d/1XfiR3_-Wv9yb6EeFwCb3-EHen6p2_Y35/view?usp=sharing", customTitle: "Aula 07 - Anafilaxia: Tratamento" },
                                { url: "https://drive.google.com/file/d/1XeVIGwHIZDDv1_gWRoScQWCvg2hZ3yez/view?usp=sharing", customTitle: "Aula 08 - Urticária e Angioedema" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1ZNsgY4TE4zM4N9ADYeAegmEEGhVNn3u_/view?usp=drive_link", customTitle: "Apostila - Alergia e Imunologia I: Alergias Alimentares e Anafilaxia" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Erros Inatos da Imunidade",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Erros Inatos da Imunid.",
                        shortcode: "EII",
                        subtitle: "",
                        contentCounts: { aulas: 6, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1MuiK22L1xmTr9TO1K-S9EVoYOC9n3MTh/view?usp=sharing", customTitle: "Aula 01 - Erros Inatos do Metabolismo: Conceitos Básicos" },
                                { url: "https://drive.google.com/file/d/1N-DqlCfVfuG8UKhkJjnQAACZbI3L9LgK/view?usp=sharing", customTitle: "Aula 02 - Erros Inatos da Imunidade: Condições Específicas" },
                                { url: "https://drive.google.com/file/d/1My8MfBXFbc0BEOuc2_-BEXD6U4dqkbQf/view?usp=sharing", customTitle: "Aula 03 - Erros Inatos do Metabolismo: Classificação - Parte I" },
                                { url: "https://drive.google.com/file/d/1MlLOhSFMtrPhhd4gRMucN2OaVqwdzuYW/view?usp=sharing", customTitle: "Aula 04 - Erros Inatos do Metabolismo: Classificação - Parte II" },
                                { url: "https://drive.google.com/file/d/1N5lLQBUDuMlHkPNVahLSGS8M8VIRLGG8/view?usp=sharing", customTitle: "Aula 05 - Erros Inatos da Imunidade: Defeitos da Fagocitose" },
                                { url: "https://drive.google.com/file/d/1Mh9PNCai07XvM_95P71KH5RyujmfzSch/view?usp=sharing", customTitle: "Aula 06 - IImunodeficiências e Doenças Alérgicas" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1ARaS3zVaQA2_vaLKj5CLWt3I260e_XyF/view?usp=drive_link", customTitle: "Apostila - Erros Inatos da Imunidade" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Aleitamento Materno e Alimentação",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Aleitamento Materno e Alimentação",
                        shortcode: "AMA",
                        subtitle: "",
                        contentCounts: { aulas: 9, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1OqMIkE2MCl5VrBKeg0jNDLdpdT7oWEY2/view?usp=sharing", customTitle: "Aula 01 - Aleitamento Materno: Definições e Orientações - Mil Dias: Fisiologia da Lactação" },
                                { url: "https://drive.google.com/file/d/1Ou2xw8Q08J9vVwJ0e8clCC1f1k3shJL0/view?usp=sharing", customTitle: "Aula 02 - Desenvolvimento Neuropsicomotor: Reflexos Primitivos" },
                                { url: "https://drive.google.com/file/d/1Od-0w6X8tM_lfEf2u2uJvENmueOFRV5U/view?usp=sharing", customTitle: "Aula 03 - Crescimento Infantil: Crescimento Normal ou Fisiológico" },
                                { url: "https://drive.google.com/file/d/1OfsHxL_k1wMPa_-V2OBrwYAowjeGypgl/view?usp=sharing", customTitle: "Aula 04 - Aleitamento Materno: Contraindicações" },
                                { url: "https://drive.google.com/file/d/1OWfBELhQPv-Vg1_cPou9DdsbES87iNN_/view?usp=sharing", customTitle: "Aula 05 - Alimentação Complementar: Alimentação do Lactente (Incluindo Doze Passos)" },
                                { url: "https://drive.google.com/file/d/1Ok_cdsML-16sGKgXsfr6cBpIExHJ6Uc0/view?usp=sharing", customTitle: "Aula 06 - Aleitamento Materno: Dificuldades e Problemas Comuns" },
                                { url: "https://drive.google.com/file/d/1OcNY5dP2lfS9wuRwJU_u8svtEL3d_b51/view?usp=sharing", customTitle: "Aula 07 - Alimentação Complementar: Alimentação do Pré-Escolar - Escolar e Adolescente" },
                                { url: "https://drive.google.com/file/d/1P-m55z8qFSr717oPhWuaFqrBakEfo89B/view?usp=sharing", customTitle: "Aula 08 - Situações Especiais: Vegetarianismo - Veganismo" },
                                { url: "https://drive.google.com/file/d/1OguYQw24JQVEOrfbnbJbW1dFdjTdNV8A/view?usp=sharing", customTitle: "Aula 09 - Situações Especiais: Suplementação de Micronutrientes - Ferro: Vitamina A e Vitamina D" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1WA1ABT1XA2F4TGvV8XOl4cNHDiAqH-sf/view?usp=drive_link", customTitle: "Apostila - Alimentação Infantil" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Dermatologia Pediátrica",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Dermatologia Pediátrica",
                        shortcode: "DERP",
                        subtitle: "",
                        contentCounts: { aulas: 14, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1VmRe0FC3EgNzzXw-ujCDT_krx22Rh5A-/view?usp=sharing", customTitle: "Aula 01 - Dermatoses Neonatais" },
                                { url: "https://drive.google.com/file/d/1Vl9dzQ6XBuueiQgzuJnKX4zAJR-TSoiz/view?usp=sharing", customTitle: "Aula 02 - Dermatite Atópica na Infância" },
                                { url: "https://drive.google.com/file/d/1Vfa0Ok7QHWfA0JiQBwWQcdwXuEnu-PkD/view?usp=sharing", customTitle: "Aula 03 - Dermatite de Contato" },
                                { url: "https://drive.google.com/file/d/1VukTx8aozEHmZh8zHP90ettgGBMzyAyU/view?usp=sharing", customTitle: "Aula 04 - Infecções Bacterianas da Pele: Impetigo, Erisipela e Celulite" },
                                { url: "https://drive.google.com/file/d/1Va4mqQOV8rnu03nh0B3Itj88W3nJj8Ug/view?usp=sharing", customTitle: "Aula 05 - Piodermites" },
                                { url: "https://drive.google.com/file/d/1VatmxxIL5DagjBKPfgmtvMpUZEMWtNJA/view?usp=sharing", customTitle: "Aula 06 - Dermatite Seborreica" },
                                { url: "https://drive.google.com/file/d/1VVHIfuHaqfE2i1CYZB5xPFqos4FX2mZz/view?usp=sharing", customTitle: "Aula 07 - Parasitoses Cutâneas: Escabiose e Pediculose" },
                                { url: "https://drive.google.com/file/d/1WGm_xOHhPHyo3_36ojbLv4kRepwXN19T/view?usp=sharing", customTitle: "Aula 08 - Lesões Vasculares Pediátricas: Hemangiomas e Malformações" },
                                { url: "https://drive.google.com/file/d/1VMFK_dzOppHDSOij-zUegGNUcu74Xwi5/view?usp=sharing", customTitle: "Aula 09 - Nevos Pigmentados e Malformações Congênitas da Pele" },
                                { url: "https://drive.google.com/file/d/1VNb4P3LDHyS29QSLpwxmy8RK5qIzTPT9/view?usp=sharing", customTitle: "Aula 10 - Acne Pediátrica" },
                                { url: "https://drive.google.com/file/d/1V5zAY4H84UhTRkwnEnjUKjsIwfD-d1J1/view?usp=sharing", customTitle: "Aula 11 - Doenças Infecciosas e Parasitárias: Micoses Superficiais" },
                                { url: "https://drive.google.com/file/d/1Vxr34cTDi8VL5dxxi0-xoZtCrVkhwyNl/view?usp=sharing", customTitle: "Aula 12 - Urticária e Angioedema" },
                                { url: "https://drive.google.com/file/d/1VX-Y6ZHDh9Zb-vNmnx1oxHVjmWnulYh_/view?usp=sharing", customTitle: "Aula 13 - Farmacodermias" },
                                { url: "https://drive.google.com/file/d/1VPy1ulcuuEarVMNist01KmwQ0susPcSY/view?usp=sharing", customTitle: "Aula 14 - Tumores de Pele na Infância" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1W5c7XZtO63wl1P-38gdSpg1mSne49aJm/view?usp=drive_link", customTitle: "Apostila - Dermatologia Pediátrica" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Cardiologia Pediátrica",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Cardiologia Pediátrica I",
                        shortcode: "CARDPI",
                        subtitle: "",
                        contentCounts: { aulas: 5, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1O8f6o8eaUNQUxWX-S6E0T2JeLjnSFnba/view?usp=sharing", customTitle: "Aula 01 - Cardiopatias Congênitas" },
                                { url: "https://drive.google.com/file/d/1OS9JxG2MTTru0ySFr7VV_PqTYmM0aHNn/view?usp=sharing", customTitle: "Aula 02 - Cardiopatias Congênitas Acianóticas: Sobrecarga de Volume" },
                                { url: "https://drive.google.com/file/d/1OUSvqphgL9dQ6KsC5FEZ1WjaU_KCnQTN/view?usp=sharing", customTitle: "Aula 03 - Valvopatias" },
                                { url: "https://drive.google.com/file/d/1OU4dmu7YeOu2a6rhDKZPsRugE7LKuCBJ/view?usp=sharing", customTitle: "Aula 04 - Cardiopatias Restritivas" },
                                { url: "https://drive.google.com/file/d/1NlJ3RvkSi-743nIem6z-CRto8TvgHoYA/view?usp=sharing", customTitle: "Aula 05 - Arritmologia e Dispositivos" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1jfVb8bl5UuZVTltAWZClobX_2bNa1Tqv/view?usp=drive_link", customTitle: "Apostila - Cardiologia Pediátrica I: Cardiopatias Congênitas" }],
                            aulasBonus: []
                        }
                    },
                    {
                        title: "Cardiologia Pediátrica II",
                        shortcode: "CARDPII",
                        subtitle: "",
                        contentCounts: { aulas: 8, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1HzvLgsFncPOohfJwf_IGJdmfMexpIeLh/view?usp=sharing", customTitle: "Aula 01 - Anatomia Cardíaca" },
                                { url: "https://drive.google.com/file/d/1M3XTJ-AfbR9Z9VtVBBSSGwa6zfWb04Oy/view?usp=sharing", customTitle: "Aula 02 - Avaliação, Indicação e Escolha da Técnica" },
                                { url: "https://drive.google.com/file/d/1LvmcsthGxRIMG-FSXRhf_JiuZtZAIL6z/view?usp=sharing", customTitle: "Aula 03 - Valvopatias" },
                                { url: "https://drive.google.com/file/d/1LsSCQDVG_7rRRJfIIEn22tnO5LVY5QEP/view?usp=sharing", customTitle: "Aula 04 - Endocardite Infecciosa" },
                                { url: "https://drive.google.com/file/d/1LpUaTqoLj4NZc24ud5eSgbiOzdo68zMh/view?usp=sharing", customTitle: "Aula 05 - Avaliação da Criança Com Síncope: Síncope" },
                                { url: "https://drive.google.com/file/d/1Lt9knsRLL8XSvBmBo9q3v1GUgGGwPgx3/view?usp=sharing", customTitle: "Aula 06 - Valvopatias" },
                                { url: "https://drive.google.com/file/d/1LrecB-AdKT3fQbMn72KdJtss5U0cm9ix/view?usp=sharing", customTitle: "Aula 07 - Valvopatias" },
                                { url: "https://drive.google.com/file/d/1Llqu_NIPQS7_QO3Lty14beG3cCKckuTz/view?usp=sharing", customTitle: "Aula 08 - Cardiopatias Congênitas" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1MjlO9Wr6yBphur1yIP65vuPclKv5-jGW/view?usp=drive_link", customTitle: "Apostila - Cardiologia Pediátrica II: Ambulatório e Emergência" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Endocrinologia Pediátrica",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Endocri. Pediátrica I",
                        shortcode: "ENDOPI",
                        subtitle: "",
                        contentCounts: { aulas: 14, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1XGnMVOOVd0mmayO9EcS6XKEGW8IH5hLa/view?usp=sharing", customTitle: "Aula 01 - Crescimento Infantil: Crescimento Normal ou Fisiológico" },
                                { url: "https://drive.google.com/file/d/1ZJW91gen_KEdVrahxhQZrStoWQdVWG1m/view?usp=sharing", customTitle: "Aula 02 - Baixa Estatura: Variantes da Normalidade" },
                                { url: "https://drive.google.com/file/d/1Wmmak6UPhTzKeWYAbPEbMWudMHvcKb_-/view?usp=sharing", customTitle: "Aula 03 - Displasia do Desenvolvimento do Quadril" },
                                { url: "https://drive.google.com/file/d/1WdzENOKQViIMmRHq7nCqj_ocUYSOic3s/view?usp=sharing", customTitle: "Aula 04 - Baixa Estatura: Causas Endócrinas" },
                                { url: "https://drive.google.com/file/d/1ZCOqhlYGmGSkavtY0RWn24B-0vXbyGxg/view?usp=sharing", customTitle: "Aula 05 - Incontinência Urinária" },
                                { url: "https://drive.google.com/file/d/1Z0jC7HMD82mPb6UVhX3hHyFrqJu8Yelj/view?usp=sharing", customTitle: "Aula 06 - Puberdade: Puberdade Precoce Central" },
                                { url: "https://drive.google.com/file/d/1ZOV7y7-8IVaJfUsguaeHtfwAV8T7KQ5G/view?usp=sharing", customTitle: "Aula 07 - Incontinência Fecal" },
                                { url: "https://drive.google.com/file/d/1Z7qa0Sl7rq08Nhpo1i43jVLohe4-wkBw/view?usp=sharing", customTitle: "Aula 08 - Prolapso Retal, Retocele e SURS" },
                                { url: "https://drive.google.com/file/d/1ZCsajduTP-B45PJjmdlj5rnNVDM9X7H1/view?usp=sharing", customTitle: "Aula 09 - Estenose Hipertrófica do Piloro e Atresia Duodenal" },
                                { url: "https://drive.google.com/file/d/1XsYxCYFxcue6BWKxT2Z2XNF342sANAd6/view?usp=sharing", customTitle: "Aula 10 - Fimose" },
                                { url: "https://drive.google.com/file/d/1Ws21oUggX5dLqDIwfXhMKdvZfFtZhAPd/view?usp=sharing", customTitle: "Aula 11 - Criptorquidia" },
                                { url: "https://drive.google.com/file/d/1ZHi5-crTSW-fTAH-Dkk9kmY72OFvuovJ/view?usp=sharing", customTitle: "Aula 12 - Hidronefrose" },
                                { url: "https://drive.google.com/file/d/1XzLJdVrkxBCSYm_xaQ0MSVjwVeHF2OOK/view?usp=sharing", customTitle: "Aula 13 - Distúrbios Puberais: Atraso Puberal" },
                                { url: "https://drive.google.com/file/d/1WkqPxg86x6i7jbiylgvbJqrFLrNwRbvf/view?usp=sharing", customTitle: "Aula 14 - Tumores Sólidos" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1XvwQqI_A7mIcN-HBR8pPQwzcO6-dk571/view?usp=drive_link", customTitle: "Apostila - Endocrinologia Pediátrica I: Crescimento, Puberdade e Seus Distúrbios" }],
                            aulasBonus: []
                        }
                    },
                    {
                        title: "Endocri. Pediátrica II",
                        shortcode: "ENDOPII",
                        subtitle: "",
                        contentCounts: { aulas: 8, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1NjxBbjmi8XmLq5JZaJvUBaa-rGRlsd1k/view?usp=sharing", customTitle: "Aula 01 - Diabetes Mellitus: Introdução e Diagnóstico" },
                                { url: "https://drive.google.com/file/d/1NR2AYGRiMPXSaVahr2r_q-TYrLXdl4xS/view?usp=sharing", customTitle: "Aula 02 - Diabetes Mellitus: Diagnóstico e Tratamento" },
                                { url: "https://drive.google.com/file/d/1NiJQaISGZhNa5dXtflKNp176L8UYAHWT/view?usp=sharing", customTitle: "Aula 03 - Diabetes Mellitus: Complicações Agudas Hiperglicêmicas" },
                                { url: "https://drive.google.com/file/d/1NO7XBMJY8mYR2dyvvbnVZTmUInHJJBS0/view?usp=sharing", customTitle: "Aula 04 - Diabetes: Hipoglicemia" },
                                { url: "https://drive.google.com/file/d/1NU6nkbP0gvmpxXCwoKQhBVg9L1Ysh1zR/view?usp=sharing", customTitle: "Aula 05 - Diabetes Mellitus: Complicações Crônicas" },
                                { url: "https://drive.google.com/file/d/1NC_R-LbM4URPjJ-2Izs6hdoQLvANwFBp/view?usp=sharing", customTitle: "Aula 06 - Diabetes Mellitus: Complicações Crônicas e Estado Hiperglicêmico Hiperosmolar" },
                                { url: "https://drive.google.com/file/d/1Nc3mr2MxLLA9aNs1TOFHb-r5kG2kPNtC/view?usp=sharing", customTitle: "Aula 07 - Diabetes Mellitus: Cetoacidose Diabética - Diagnóstico" },
                                { url: "https://drive.google.com/file/d/1NRd66JZzWjETTgVyfjo7WRtVNAarNqeL/view?usp=sharing", customTitle: "Aula 08 - Diabetes Mellitus: Cetoacidose Diabética - Tratamento" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1OOOoC7cHWkBLAkJU8vHHAbW-cv3Aov48/view?usp=drive_link", customTitle: "Apostila - Endocrinologia Pediátrica II: Diabetes Mellitus" }],
                            aulasBonus: []
                        }
                    },
                    {
                        title: "Endocri. Pediátrica III",
                        shortcode: "ENDOPIII",
                        subtitle: "",
                        contentCounts: { aulas: 6, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1LKZ6chXVMP3gNQHIX70ZXzOiU0I9rDXP/view?usp=sharing", customTitle: "Aula 01 - Tireoide: Anatomia da Tireoide" },
                                { url: "https://drive.google.com/file/d/1LDeBSMrASffcd3eLDtKAqvt-MdO6r5p4/view?usp=sharing", customTitle: "Aula 02 - Tireoide: Hipotireoidismo" },
                                { url: "https://drive.google.com/file/d/1LC-2LkIY5gKvaxwaDYNQOtgR3FNwJreQ/view?usp=sharing", customTitle: "Aula 03 - Tireoide: Hipertireoidismo" },
                                { url: "https://drive.google.com/file/d/1L1mtABWcNsg67f00kmPaweuhQPLQnloT/view?usp=sharing", customTitle: "Aula 04 - Tireoide: Nódulo e Câncer de Tireoide" },
                                { url: "https://drive.google.com/file/d/1KqXSk8M0G42J8nxv_u-h44_ZMdOpHjbY/view?usp=sharing", customTitle: "Aula 05 - Hipoparatireoidismo" },
                                { url: "https://drive.google.com/file/d/1LGNyDYayn8Iwpm9Cqcli8ldSOFLpz3uF/view?usp=sharing", customTitle: "Aula 06 - Tireoidites" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1KyjbyaJkMSmB2pCo_1tGKKUxe9uHPo4J/view?usp=drive_link", customTitle: "Apostila - Endocrinologia Pediátrica III: Tireoide e Adrenal" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Gastroenterologia Pediátrica",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Gastroente. Pediátrica I",
                        shortcode: "GASPI",
                        subtitle: "",
                        contentCounts: { aulas: 6, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1PK8ACHvJbPHniD2W-5IL02bQ6m1ytAGY/view?usp=sharing", customTitle: "Aula 01 - Diarreia: Definições e Mecanismos" },
                                { url: "https://drive.google.com/file/d/1P23wCnVoM80A6z5kOO2BxjqiknCqlphb/view?usp=sharing", customTitle: "Aula 02 - Diarreia Aguda: Epidemiologia e Etiologias" },
                                { url: "https://drive.google.com/file/d/1PSlmDcYq2JwqwdSOXhQHHINDKwJDW25W/view?usp=sharing", customTitle: "Aula 03 - Diarreia Aguda: Avaliação e Tratamento de Desidratação" },
                                { url: "https://drive.google.com/file/d/1PI0VQzqot0etnSG_e1NpYFaO7ZidBEuz/view?usp=sharing", customTitle: "Aula 04 - Diarreia Crônica: Doença Celíaca" },
                                { url: "https://drive.google.com/file/d/1PNJBXeyrt-CfnPtDgrdCHTjf8Qe5sHI3/view?usp=sharing", customTitle: "Aula 05 - Diarreia Crônica: Causas Não Infecciosas" },
                                { url: "https://drive.google.com/file/d/1HwmOUC2hpUtxpw5vQNvF1VGs_yCyItKC/view?usp=sharing", customTitle: "Aula 06 - Diarreia Crônica: Doença Inflamatória Intestinal" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1WH7uZ4k7CkEGX4Pzv7SxZzvQJGbkE7Dz/view?usp=drive_link", customTitle: "Apostila - Gastroenterologia Pediátrica I: Diarreia" }],
                            aulasBonus: []
                        }
                    },
                    {
                        title: "Gastroente. Pediátrica II",
                        shortcode: "GASPII",
                        subtitle: "",
                        contentCounts: { aulas: 8, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1V47yyqG63TBTROj8KfFTcbKXmQNO0cW_/view?usp=sharing", customTitle: "Aula 01 - Doença do Refluxo Gastroesofágico (DRGE) Pediátrica" },
                                { url: "https://drive.google.com/file/d/1Unuw6ggU4k4ir_Vhqz2fBOKgLJzbJ8fS/view?usp=sharing", customTitle: "Aula 02 - Distúrbios Gastrointestinais Funcionais: Parte II" },
                                { url: "https://drive.google.com/file/d/1UlVwvqLiP3f9ULDZA3iw3VFSVpk-gk-i/view?usp=sharing", customTitle: "Aula 03 - Constipação Crônica em Pediatria" },
                                { url: "https://drive.google.com/file/d/1UqaI8qLCE9Llc8m9lDWHk_b0UrU8RDME/view?usp=sharing", customTitle: "Aula 04 - Hepatites Pediátricas: Virais e Autoimunes" },
                                { url: "https://drive.google.com/file/d/1V3isjoLSAi-FBNELu90k_Q3S3nlM0BL_/view?usp=sharing", customTitle: "Aula 05 - Doenças Colestáticas Pediátricas" },
                                { url: "https://drive.google.com/file/d/1Uic2oG1JZW6X58qEFYEtBucv7waB7XwD/view?usp=sharing", customTitle: "Aula 06 - Doença de Wilson Pediátrica" },
                                { url: "https://drive.google.com/file/d/1UsjrUwpLNelZXCLFZ_1IiCFEo7XaK5yh/view?usp=sharing", customTitle: "Aula 07 - Hemocromatose Hereditária Pediátrica" },
                                { url: "https://drive.google.com/file/d/1Urs3-c_jwQoo5P6e5l8XZBuBsjAF28sl/view?usp=sharing", customTitle: "Aula 08 - Pancreatites Pediátricas" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1W82IycFwNCsblMvB2wtz_J5fQvq8MGoO/view?usp=drive_link", customTitle: "Apostila - Gastroenterologia Pediátrica II: DRGE, Distúrbios Funcionais e Doenças Hepáticas e Constipação" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Genética na Prática Pediátrica",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Genét. na Prá. Pediátrica",
                        shortcode: "GENPED",
                        subtitle: "",
                        contentCounts: { aulas: 4, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1IaCpRiYDpuMt3lwArtyBysERouP6RZc8/view?usp=sharing", customTitle: "Aula 01 - Genética na Prática Pediátrica: Conceitos Básicos e Síndrome de Down" },
                                { url: "https://drive.google.com/file/d/1PaPwxlhJ1gn-kZlAir8B66PXSvgRoTlN/view?usp=sharing", customTitle: "Aula 02 - Erros Inatos do Metabolismo: Dislipidemias" },
                                { url: "https://drive.google.com/file/d/1ITK9SGfMOtBDSQP_nT0xVhH-tDagVbe9/view?usp=sharing", customTitle: "Aula 03 - Genética na Prática Pediátrica: Síndrome Neurocutâneas - Mucopolissacaridoses" },
                                { url: "https://drive.google.com/file/d/1QBiwd9E7WMjnYLKrnIQjl27OuJNzcW0r/view?usp=sharing", customTitle: "Aula 04 - Triagem Neonatal: Teste do Pezinho" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1XSUYlisFv_C-N9xi03YQyToDm7DsMVdK/view?usp=drive_link", customTitle: "Apostila - Genética na Prática Pediátrica" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Neonatologia",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Neonatologia I",
                        shortcode: "NEO I",
                        subtitle: "",
                        contentCounts: { aulas: 6, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1R3qIBHWOASzSR7Y9gFd2oNE6h9MyHqnw/view?usp=sharing", customTitle: "Aula 01 - Introdução à Neonatologia: Conceitos Básicos" },
                                { url: "https://drive.google.com/file/d/1IMpbrp2JO6xTVY-akiyJhZZY7BWIyDd-/view?usp=sharing", customTitle: "Aula 02 - Reanimação Neonatal" },
                                { url: "https://drive.google.com/file/d/1RG2j1sAKzOoo2TQp2k8OvNXdhufi4_fV/view?usp=sharing", customTitle: "Aula 03 - Semiologia do Recém-Nascido" },
                                { url: "https://drive.google.com/file/d/1RHUTd_i99ug6skqTRmgRCD8p1q79MQ4b/view?usp=sharing", customTitle: "Aula 04 - Triagem Neonatal: Teste do Pezinho" },
                                { url: "https://drive.google.com/file/d/1ISMJT2Pve1pF6-BwgfxUIYWR8dP5gCch/view?usp=sharing", customTitle: "Aula 05 - Cuidados Imediatos e de Rotina com o Recém-Nascido" },
                                { url: "https://drive.google.com/file/d/1IJb1ru9LDdAclJcdEjV7VjoAa88B3o7w/view?usp=sharing", customTitle: "Aula 06 - Conduta no Recém-Nascido de Baixo Peso e Prematuro" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1Wk2_Y395CKAFoE-fD181-A-tyhFRjWA1/view?usp=drive_link", customTitle: "Apostila - Neonatologia I: Atendimento Inicial do Recém-Nascido" }],
                            aulasBonus: []
                        }
                    },
                    {
                        title: "Neonatologia II",
                        shortcode: "NEO II",
                        subtitle: "",
                        contentCounts: { aulas: 13, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1Yjo6akI1aO9HNG6aslWJEi4zCYmHKEKv/view?usp=sharing", customTitle: "Aula 01 - Icterícia Neonatal: Fisiológica e Patológica" },
                                { url: "https://drive.google.com/file/d/1YTxnsZXMsJjJ1hw7QulX8qn5aK9zjx7o/view?usp=sharing", customTitle: "Aula 02 - Doença Hemolítica do Recém-Nascido (DHRN)" },
                                { url: "https://drive.google.com/file/d/1YR4LDf5dpsIrshb_iIQ-Oa8jAf6OKwxk/view?usp=sharing", customTitle: "Aula 03 - Síndrome do Desconforto Respiratório (SDR) Neonatal" },
                                { url: "https://drive.google.com/file/d/1Y5ymlQnDZuXQso9yBPSpqu4qwgQLfGTw/view?usp=sharing", customTitle: "Aula 04 - Taquipneia Transitória do Recém-Nascido (TTRN)" },
                                { url: "https://drive.google.com/file/d/1Ymf7ZIHdG33CDe3uoyc47501EhuKVCsE/view?usp=sharing", customTitle: "Aula 05 - Pneumonia Neonatal" },
                                { url: "https://drive.google.com/file/d/1Y9PmseWI_Hqi4KokufiYSkRwxqLdJggE/view?usp=sharing", customTitle: "Aula 06 - Aspiração de Mecônio" },
                                { url: "https://drive.google.com/file/d/1Y2rtSGqEUTpWozRQZn10UuSEoCF_CQaN/view?usp=sharing", customTitle: "Aula 07 - Displasia Broncopulmonar" },
                                { url: "https://drive.google.com/file/d/1Ys3MOLbj7y29iMy4sLdLoKcS4vJiJb-i/view?usp=sharing", customTitle: "Aula 08 - Sepse Neonatal: Diagnóstico e Manejo" },
                                { url: "https://drive.google.com/file/d/1Y_EoYGlkQB_h0yuGAV820tO6dUYW3mVZ/view?usp=sharing", customTitle: "Aula 09 - Infecções Congênitas: Sífilis Congênita" },
                                { url: "https://drive.google.com/file/d/1YMEGpWpC_omiPxRQXRT7YiLWrszMQ9lP/view?usp=sharing", customTitle: "Aula 10 - Infecções Congênitas: Toxoplasmose e Rubéola Congênitas" },
                                { url: "https://drive.google.com/file/d/1Y1gRJeh4zJrTJaaWv2zkcDSwIuxatZ03/view?usp=sharing", customTitle: "Aula 11 - Infecções Congênitas: Citomegalovírus e Herpes Neonatal" },
                                { url: "https://drive.google.com/file/d/1YSULc5djE2wk3Rq8DlrbLMatzJ37SXJq/view?usp=sharing", customTitle: "Aula 12 - Infecções Congênitas: HIV e Outras Infecções Perinatais" },
                                { url: "https://drive.google.com/file/d/1Z-hjbNRkdMWsrf3jEP0Ck-Otsl6ovtd4/view?usp=sharing", customTitle: "Aula 13 - Encefalopatia Hipóxico-Isquêmica (EHI)" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1Zz8PsMiIh0scmPaBzUyIE-am48-rNhmE/view?usp=drive_link", customTitle: "Apostila - Neonatologia II: Doenças Neonatais I" }],
                            aulasBonus: []
                        }
                    },
                    {
                        title: "Neonatologia III",
                        shortcode: "NEO III",
                        subtitle: "",
                        contentCounts: { aulas: 6, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1IGQb7YdyMwDDXFRZjU9HUEDramy8zjpe/view?usp=sharing", customTitle: "Aula 01 - Hemorragia Intracraniana Neonatal" },
                                { url: "https://drive.google.com/file/d/1IGOzAHqAAHgDqkTFLj2-QrnYd0EVvUhL/view?usp=sharing", customTitle: "Aula 02 - Convulsões Neonatais" },
                                { url: "https://drive.google.com/file/d/1LggDlhz_jn7FzZ7aI3lu1ltaqRpljn46/view?usp=sharing", customTitle: "Aula 03 - Enterocolite Necrosante (ECN)" },
                                { url: "https://drive.google.com/file/d/1LYdMf9aFTF1SDkDFPPGT6UnRK0o7NPQH/view?usp=sharing", customTitle: "Aula 04 - Persistência do Canal Arterial (PCA) no Prematuro" },
                                { url: "https://drive.google.com/file/d/1Lb0Q9IqXi4Goi2BQkq-y-wCvCEEk7tlf/view?usp=sharing", customTitle: "Aula 05 - Retinopatia da Prematuridade" },
                                { url: "https://drive.google.com/file/d/1Ll6g9GCvESz8MOjMzK9nLwy1s2IbSHvG/view?usp=sharing", customTitle: "Aula 06 - Displasia Broncopulmonar (DBP) - Visão Geral" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1LZ5IxZmnJGVCdNLFiyyhnSZqVKXKkEGP/view?usp=drive_link", customTitle: "Apostila - Neonatologia III: Doenças Neonatais II" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Neurologia Pediátrica",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Neurologia Pediátrica I",
                        shortcode: "NEUPI",
                        subtitle: "",
                        contentCounts: { aulas: 8, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1JijuSqe-0gos0MsTrDrKiD-kh6gOmEUy/view?usp=sharing", customTitle: "Aula 01 - Crises Epilépticas na Infância" },
                                { url: "https://drive.google.com/file/d/1JSDYXf-yRsjgA4KV-I7izYIAZaZwQmzl/view?usp=sharing", customTitle: "Aula 02 - Síndromes Epilépticas Específicas da Infância" },
                                { url: "https://drive.google.com/file/d/1JljjL2jJg92KHFEdDuGkmukMf0kIh2Bo/view?usp=sharing", customTitle: "Aula 03 - Estado de Mal Epiléptico em Pediatria" },
                                { url: "https://drive.google.com/file/d/1JNOo-Q8J5Wvx37Ur76DuCD-pLHz9lCu-/view?usp=sharing", customTitle: "Aula 04 - Encefalopatias Epilépticas" },
                                { url: "https://drive.google.com/file/d/1JQ3V_I2TL4dm_tp7PywxQgIq_H6zN4rR/view?usp=sharing", customTitle: "Aula 05 - Cefaleias Pediátricas" },
                                { url: "https://drive.google.com/file/d/1K41HIYvpFL4Y2QMuNiHggFerL8Bdlau6/view?usp=sharing", customTitle: "Aula 06 - Hidrocefalia e Malformações do SNC" },
                                { url: "https://drive.google.com/file/d/1JNkpIu8sQ1i0BSC4f_bCBhvyRHB1dPd2/view?usp=sharing", customTitle: "Aula 07 - Tumores do Sistema Nervoso Central em Pediatria" },
                                { url: "https://drive.google.com/file/d/1Ja4wB9KYgP2UfzzktFL6QKh39MzALEC1/view?usp=sharing", customTitle: "Aula 08 - Lesões Neurológicas no Trauma Pediátrico" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1KhR50Arjr3E9_NChsgE1wq2hWP2dLq5h/view?usp=drive_link", customTitle: "Apostila - Neurologia Pediátrica I: Epilepsia e Urgências Neurológicas" }],
                            aulasBonus: []
                        }
                    },
                    {
                        title: "Neurologia Pediátrica II",
                        shortcode: "NEUPII",
                        subtitle: "",
                        contentCounts: { aulas: 10, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1Pl7L8A-Wt5V04FHpTEV4rLs_SSzmFrKe/view?usp=sharing", customTitle: "Aula 01 - Desenvolvimento Neurológico Normal e Marcos do Desenvolvimento" },
                                { url: "https://drive.google.com/file/d/1Q3K57khjdDVn1b1B5I3SarOusm_pl75E/view?usp=sharing", customTitle: "Aula 02 - Atraso do Desenvolvimento Global" },
                                { url: "https://drive.google.com/file/d/1Pvjh-BMwYWiLvmBmyg4yUWc010KuzOzk/view?usp=sharing", customTitle: "Aula 03 - Transtorno do Espectro Autista (TEA)" },
                                { url: "https://drive.google.com/file/d/1Q6ve1hXx884yPYiFU3aRB4CwrsdJyTty/view?usp=sharing", customTitle: "Aula 04 - Transtorno do Déficit de Atenção e Hiperatividade (TDAH)" },
                                { url: "https://drive.google.com/file/d/1Pds7R72dDwZ4asonZhdPnU3ZPEZKnY9j/view?usp=sharing", customTitle: "Aula 05 - Paralisia Cerebral" },
                                { url: "https://drive.google.com/file/d/1PxyeahkKZtqbwcqKtWgs4P7yAe6X42gs/view?usp=sharing", customTitle: "Aula 06 - Distúrbios do Movimento em Pediatria" },
                                { url: "https://drive.google.com/file/d/1PxeTyFMhqVDHhcW5QaHtPAotNkClEwzo/view?usp=sharing", customTitle: "Aula 07 - Neuropatias Periféricas Pediátricas" },
                                { url: "https://drive.google.com/file/d/1Q4luxZhaj0Hzw_1_PrT2rBzNtMpkNwgR/view?usp=sharing", customTitle: "Aula 08 - Doenças Neuromusculares Pediátricas" },
                                { url: "https://drive.google.com/file/d/1QA2aMvDLUdfVdEdg9aRUwykygvEo3c0-/view?usp=sharing", customTitle: "Aula 09 - Distúrbios do Sono em Crianças" },
                                { url: "https://drive.google.com/file/d/1Q8nlFwyPO8U_cFLRwHRhC0ktllFEV9F6/view?usp=sharing", customTitle: "Aula 10 - Abordagem da Enxaqueca em Crianças e Adolescentes" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1Qy3uWnalORF_6qM3ad2l1BkBbGHdMAWA/view?usp=drive_link", customTitle: "Apostila - Neurologia Pediátrica II: Neuropediatria Ambulatorial" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Infectologia",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Infectologia I",
                        shortcode: "INFEC I",
                        subtitle: "",
                        contentCounts: { aulas: 6, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1QDvCDFubzw4xp_gfOlO2rf-OUKRyPkyD/view?usp=sharing", customTitle: "Aula 01 - Imunizações: Introdução" },
                                { url: "https://drive.google.com/file/d/1QUWuUnJRCnIDkc8CiI1XeSVj56gjD5J6/view?usp=sharing", customTitle: "Aula 02 - Imunizações: Calendários Vacinais I" },
                                { url: "https://drive.google.com/file/d/1QLXjCHj3B4SFIuMtMtaH168OuANz55U3/view?usp=sharing", customTitle: "Aula 03 - Imunizações: Calendários Vacinais II" },
                                { url: "https://drive.google.com/file/d/1HtKkgWKNePw-gmuX86Ym_nfvTzbP5LeU/view?usp=sharing", customTitle: "Aula 04 - Imunizações: Vacinas - Parte I" },
                                { url: "https://drive.google.com/file/d/1QPg27aD0sxStK4UlLEBsgfNLs_zGpFnT/view?usp=sharing", customTitle: "Aula 05 - Imunizações: Vacinas - Parte II (Parte II)" },
                                { url: "https://drive.google.com/file/d/1Qi608tNsNarFtM6ES69ta51q2BsTcmrh/view?usp=sharing", customTitle: "Aula 06 - Tuberculose: Controle da Doença - Parte II" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1WRPoTR18DpCmLEEl3mXagyYrRyWp0YBo/view?usp=drive_link", customTitle: "Apostila - Infectologia I: Imunizações" }],
                            aulasBonus: []
                        }
                    },
                    {
                        title: "Infectologia II",
                        shortcode: "INFEC II",
                        subtitle: "",
                        contentCounts: { aulas: 6, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1QzFEhsM75BqaR7BfK4b_mYuvNU4PowRi/view?usp=sharing", customTitle: "Aula 01 - Febre" },
                                { url: "https://drive.google.com/file/d/1Ig5H3dtEnnx60rQwExF6PXThyyN4XCiE/view?usp=sharing", customTitle: "Aula 02 - Doenças Exantemáticas: Sarampo" },
                                { url: "https://drive.google.com/file/d/1Iaox-9j9jX9XSbfYA2xTuj22xCPVCX0E/view?usp=sharing", customTitle: "Aula 03 - Doenças Exantemáticas: Outras Doenças - Parte I" },
                                { url: "https://drive.google.com/file/d/1Iabsvhm4d29fuP1HIoX2R0PRTtMaQny-/view?usp=sharing", customTitle: "Aula 04 - Doenças Exantemáticas: Outras Doenças - Parte II" },
                                { url: "https://drive.google.com/file/d/1QwTmHWVZFssqKasXU77zh9KcyA4SiM56/view?usp=sharing", customTitle: "Aula 05 - Piodermites" },
                                { url: "https://drive.google.com/file/d/1QisiVSTf_JaWf-OkaIRSUubnWiNLYtSb/view?usp=sharing", customTitle: "Aula 06 - Dermatite Seborreica" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1Y2nKQuBsbbJi3fQe6-VmiUjE2w5S-8hG/view?usp=drive_link", customTitle: "Apostila - Infectologia II: Síndromes Exantemáticas e Grandes Síndromes Febris I" }],
                            aulasBonus: []
                        }
                    },
                    {
                        title: "Infectologia III",
                        shortcode: "INFEC III",
                        subtitle: "",
                        contentCounts: { aulas: 5, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1ZTpEFZuN2li6OqurjS21MUbNFXyWhBm6/view?usp=sharing", customTitle: "Aula 01 - Síndromes Autoinflamatórias" },
                                { url: "https://drive.google.com/file/d/1ZIpr77koK813kO5iHH-tHf1XsLTF9BCs/view?usp=sharing", customTitle: "Aula 02 - Faringite Estreptocócica" },
                                { url: "https://drive.google.com/file/d/1ZTUJp_69F_XeqE00RCaIzt3SrcwyHz6R/view?usp=sharing", customTitle: "Aula 03 - Doença de Kawasaki" },
                                { url: "https://drive.google.com/file/d/1ZOEt7yB9ZCWCKNfNPLeP6KBuCRnwuJlp/view?usp=sharing", customTitle: "Aula 04 - Púrpura de Henoch-Schönlein" },
                                { url: "https://drive.google.com/file/d/1ZM5-QI1aKGQzW2q_HxkNriw4QNPlBvsH/view?usp=sharing", customTitle: "Aula 05 - Febre Reumática" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1__5dVq3cpl-_m2EBjh1oHu-UvcAc1_cu/view?usp=drive_link", customTitle: "Apostila - Infectologia III: Grandes Síndromes Febris II" }],
                            aulasBonus: []
                        }
                    },
                    {
                        title: "Infectologia IV",
                        shortcode: "INFEC IV",
                        subtitle: "",
                        contentCounts: { aulas: 6, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1VVcIrTD-sZx3a0jC4nuz9GEUPllmt-zl/view?usp=drive_link", customTitle: "Aula 01 - Parasitose Intestinal" },
                                { url: "https://drive.google.com/file/d/1upXlLUu5cxzIP6wLMvFQCoYsjXtBWcul/view?usp=drive_link", customTitle: "Aula 02 - Tromboembolismo Venoso: TVP e TEP" },
                                { url: "https://drive.google.com/file/d/1_-S4nIAKVMQUjKBFgL2bTwe9Udm-HbPn/view?usp=drive_link", customTitle: "Aula 03 - Faringites Virais" },
                                { url: "https://drive.google.com/file/d/10pGr1ZJZ8gzPye7fD4fsmTkfkQihAogs/view?usp=drive_link", customTitle: "Aula 04 - Síndrome Nefrótica" },
                                { url: "https://drive.google.com/file/d/1dYj6mNXqRWdbUmdiZrsa97PcZ1i8F4nF/view?usp=sharing", customTitle: "Aula 05 - Síndrome Nefrótica" },
                                { url: "https://drive.google.com/file/d/1scvKaGVl5B-fTcfNjy1MKRLEsRLzgJkM/view?usp=sharing", customTitle: "Aula 06 - Obesidade" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1vFGjkTarqH6vzxVKFAq_1ivlzIJiLQlo/view?usp=drive_link", customTitle: "Apostila - Infectologia IV: Parasitoses Intestinais" }],
                            aulasBonus: []
                        }
                    },
                    {
                            title: "Infectologia V - HIV",
                            shortcode: "INFEC V",
                            subtitle: "",
                            contentCounts: { aulas: 3, apostilas: 1, aulasBonus: 0 },
                            contentLinks: {
                                aulas: [
                                    { url: "https://drive.google.com/file/d/1dYnL6L2rg74hg0nZZIf5UhKHHOabP68Q/view?usp=sharing", customTitle: "Aula 01 - Prevenção da Transmissão Vertical" },
                                    { url: "https://drive.google.com/file/d/1dXnAs5DF_3t2Z_a7Lo3zC-zXZGljAnSk/view?usp=sharing", customTitle: "Aula 02 - Diagnóstico e Tratamento" },
                                    { url: "https://drive.google.com/file/d/1dZAfT1bXbHlYz2ARBV_TKb55-MZ4DPBc/view?usp=sharing", customTitle: "Aula 03 - Profilaxia Pós-Exposição" }
                                ],
                                apostilas: [{ url: "https://drive.google.com/file/d/1dMIT2j5GmeIpON0GqDyqtWzE74mcZihX/view?usp=drive_link", customTitle: "Apostila - Infectologia V: HIV" }],
                                aulasBonus: []
                            }
                        
                    }
                ]
            },
            {
                name: "Grandes Emergências Pediátricas",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Grandes Emerg. Ped. I",
                        shortcode: "GEP I",
                        subtitle: "",
                        contentCounts: { aulas: 6, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1jGtZRdsIyzHuYOzcsw40TtQTiEfEpePd/view?usp=sharing", customTitle: "Aula 01 - Suporte de Vida Pediátrico" },
                                { url: "https://drive.google.com/file/d/1jVIfIuOTwAMWaIOTLUaoG-aGir9nUlVA/view?usp=sharing", customTitle: "Aula 02 - Choque em Pediatria" },
                                { url: "https://drive.google.com/file/d/1jMSH8IqonAUePr_kpVOcYwVC7OG9v_uv/view?usp=sharing", customTitle: "Aula 03 - Sepse e Choque Séptico" },
                                { url: "https://drive.google.com/file/d/1jTtTJssO35nVydspCEfL94DB7YdtiPQS/view?usp=sharing", customTitle: "Aula 04 - Bradiarritmias" },
                                { url: "https://drive.google.com/file/d/1j9amRTlJvBVnx8V152vSaOagW4U8Z6Vg/view?usp=sharing", customTitle: "Aula 05 - Taquiarritmias" },
                                { url: "https://drive.google.com/file/d/1jE7hAwmZ3INJm-sTKOBWvgtGLF6MTsCa/view?usp=sharing", customTitle: "Aula 06 - Trauma Cranioencefálico" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1ltP0OUjoAkx0njMJ0fWWVGGzyEhve86m/view?usp=drive_link", customTitle: "Apostila - Grandes Emergências Pediátricas I: Choque, Arritmias e PCR" }],
                            aulasBonus: []
                        }
                    },
                    {
                        title: "Grandes Emerg. Ped. II",
                        shortcode: "GEP II",
                        subtitle: "",
                        contentCounts: { aulas: 4, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/13IPkpFWdMe1Ij6KkcRyvRdqm6bK69lD9/view?usp=sharing", customTitle: "Aula 01 - Prevenção de Acidentes" },
                                { url: "https://drive.google.com/file/d/13HYsMrMsXQoIHJW1QTgSIXzsynCQb8rf/view?usp=sharing", customTitle: "Aula 02 - Maus Tratos na Infância" },
                                { url: "https://drive.google.com/file/d/13AaKtdyAl4YDrtAnEBH6xsmiNMvxKIrS/view?usp=sharing", customTitle: "Aula 03 - Queimaduras" },
                                { url: "https://drive.google.com/file/d/13CpJBONYPR4NfnrztuY_-EAORwd5iz52/view?usp=sharing", customTitle: "Aula 04 - Trauma: Atendimento Inicial e Principais Lesões" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1-AtNrCwIytUZDcteeZ4ZDtsB7ZMW4Fvk/view?usp=drive_link", customTitle: "Apostila - Grandes Emergências Pediátricas II: Trauma Pediátrico" }],
                            aulasBonus: []
                        }
                    },
                    {
                        title: "Grandes Emerg. Ped. III",
                        shortcode: "GEP III",
                        subtitle: "",
                        contentCounts: { aulas: 4, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1bH6okICQY6qPk1qvYQQwFTK6QA2lVy7j/view?usp=sharing", customTitle: "Aula 01 - Eventos Súbitos em Pediatria" },
                                { url: "https://drive.google.com/file/d/1b5XKn0k72FD_Ot88I7aeOFpHXaprikUW/view?usp=sharing", customTitle: "Aula 02 - Intoxicações Pediátricas" },
                                { url: "https://drive.google.com/file/d/1bDiIXZNaEW1qOxMAXT7bDN-ShWdtAoi4/view?usp=sharing", customTitle: "Aula 03 - Afogamento e Quase Afogamento" },
                                { url: "https://drive.google.com/file/d/1bFiGHFOwKxZGBQ_EX8QWPUIW2UMNBPRr/view?usp=sharing", customTitle: "Aula 04 - Acidente por Animal Peçonhento" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1_acXQUMFsfX61sY3dsaRWQ15ZHHgen3s/view?usp=drive_link", customTitle: "Apostila - Grandes Emergências Pediátricas III: Outras Emergências" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Hematologia Pediátrica",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Hematologia Pediátrica I",
                        shortcode: "HEMPI",
                        subtitle: "",
                        contentCounts: { aulas: 7, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1oacBNAFqFajBvnV0RnMeV_LC6obwcTwy/view?usp=drive_link", customTitle: "Aula 01 - Anemia Ferropriva" },
                                { url: "https://drive.google.com/file/d/1ilj3XWZ_fDImfaC0AWO0T3zhKox2jVnY/view?usp=sharing", customTitle: "Aula 02 - Anemia de Doença Crônica" },
                                { url: "https://drive.google.com/file/d/117vdjMXtAY7vCe2fsTzWk-QaLbx2gQjw/view?usp=sharing", customTitle: "Aula 03 - Anemia Megaloblástica" },
                                { url: "https://drive.google.com/file/d/1HkVcuUnZIYY8g2AImHFMsn8o0kDyPk4M/view?usp=sharing", customTitle: "Aula 04 - Anemia Aplásica" },
                                { url: "https://drive.google.com/file/d/1c7nkh9WWT4w6FTo7DtTEotVePaDpqM0M/view?usp=sharing", customTitle: "Aula 05 - Anemia Hemolítica Autoimune" },
                                { url: "https://drive.google.com/file/d/1YXA7_-HC2L0EPSlsw6wdWfcNQW4qO_bp/view?usp=sharing", customTitle: "Aula 06 - Anemia Sideroblástica" },
                                { url: "https://drive.google.com/file/d/1uP4c7lln3WY839Gv7AFjx6nxBIUDFpcs/view?usp=sharing", customTitle: "Aula 07 - Anemia Falciforme" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1zgv5WoPWythO1fwqvIsBMqKPRbtAaeOx/view?usp=drive_link", customTitle: "Apostila - Hematologia Pediátrica I: Anemias e Distúrbios de Hemostasia" }],
                            aulasBonus: []
                        }
                    },
                    {
                        title: "Hematologia Pediátrica II",
                        shortcode: "HEMPII",
                        subtitle: "",
                        contentCounts: { aulas: 7, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1OacfWlynEFyfFwcKg6RxQIojCqxqPhqw/view?usp=drive_link", customTitle: "Aula 01 - Leucemia Linfoide Aguda (LLA) em Pediatria" },
                                { url: "https://drive.google.com/file/d/1PieP6B2FbAAhmF9bUJkve57oUaSyErKI/view?usp=drive_link", customTitle: "Aula 02 - Leucemia Mieloide Aguda (LMA) em Pediatria" },
                                { url: "https://drive.google.com/file/d/1euMlRKkd_K63NwmPd2bRvIsg5qqI4SK3/view?usp=drive_link", customTitle: "Aula 03 - Linfoma de Hodgkin em Pediatria" },
                                { url: "https://drive.google.com/file/d/19O_3S1EtpNKXcRDbbhRTWBocM3ZH4wCW/view?usp=sharing", customTitle: "Aula 04 - Linfoma Não Hodgkin em Pediatria" },
                                { url: "https://drive.google.com/file/d/1eCnAawjdSZO5MpCLK1YbPkdoeziiQ0Kc/view?usp=sharing", customTitle: "Aula 05 - Histiocitoses Pediátricas" },
                                { url: "https://drive.google.com/file/d/1_IWA1x3CoV9_YNQVo0sTMAkT3Po2fC7Y/view?usp=sharing", customTitle: "Aula 06 - Transfusão de Hemoderivados em Pediatria" },
                                { url: "https://drive.google.com/file/d/1iqkdKBOSTg4UxEbIgrFo4zaU7e8pIKla/view?usp=sharing", customTitle: "Aula 07 - Anemia Aplásica Pediátrica" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1zzxWFXRJE04R5kc7EjPdDXx_F1ENDbYQ/view?usp=drive_link", customTitle: "Apostila - Hematologia Pediátrica II: Neoplasias Hematológicas" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Otorrinopediatria, Oftalmopediatria e Saúde Bucal",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Otorr., Oftalped. e S. B.",
                        shortcode: "OOSB",
                        subtitle: "",
                        contentCounts: { aulas: 6, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1mBXPjpLsXyeBde6U2CrUREwDuSvVGVL9/view?usp=sharing", customTitle: "Aula 01 - Otorrinolaringologia, Oftalmopediatria e Saúde Bucal" },
                                { url: "https://drive.google.com/file/d/1mJkhXK0gCiRV2Y-rcFRvu4Bdo7i1DrVD/view?usp=sharing", customTitle: "Aula 02 - Saúde Bucal" },
                                { url: "https://drive.google.com/file/d/1mQmp_jIXhCEWG3aKM8lf3KABbHp5tERf/view?usp=sharing", customTitle: "Aula 03 - Obstrução Congênita do Ducto Nasolacrimal" },
                                { url: "https://drive.google.com/file/d/1mIfE6mO8g1AuEyfI7vBG8P0VA1ZJobTp/view?usp=sharing", customTitle: "Aula 04 - Exame Físico e Estrabismo" },
                                { url: "https://drive.google.com/file/d/1mQ3A5dcL8ktsvYgf6xy9ChiHy-hHPna5/view?usp=sharing", customTitle: "Aula 05 - Malformações da Laringe" },
                                { url: "https://drive.google.com/file/d/1lxsyKZgzGOxhqeRDpw8e13LdMVhlr4Ip/view?usp=sharing", customTitle: "Aula 06 - Epistaxe" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1oBikhSK77hbtdqclSEBpURWntSmdvBeH/view?usp=drive_link", customTitle: "Apostila - Otorrinolaringologia, Oftalmopediatria e Saúde Bucal" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Doenças Respiratórias",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Doenças Respiratórias I",
                        shortcode: "DRESPI",
                        subtitle: "",
                        contentCounts: { aulas: 11, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1z_T0FLDets6ju4zapGGt7UHNLZpPwrBY/view?usp=sharing", customTitle: "Aula 01 - Resfriado Comum e Influenza" },
                                { url: "https://drive.google.com/file/d/1z_jYpvZHQIrMDFIoYPW9P8pSeJucjEYE/view?usp=sharing", customTitle: "Aula 02 - Rinossinusite" },
                                { url: "https://drive.google.com/file/d/1zXemTmDqpD_iaJKcRsxfuCyvo2tQThkv/view?usp=sharing", customTitle: "Aula 03 - Faringites Virais" },
                                { url: "https://drive.google.com/file/d/1za4qWnVD3EfaSbcrF2EQG7AT-IMnaDaq/view?usp=sharing", customTitle: "Aula 04 - Faringite Estreptocócica" },
                                { url: "https://drive.google.com/file/d/1z_SjSadw8YJUFauv4oRInrD1QghFakpK/view?usp=sharing", customTitle: "Aula 05 - Otite Média Aguda" },
                                { url: "https://drive.google.com/file/d/1zYQlLMAflOcIQvP7b-upfeLxgz-YI8DB/view?usp=sharing", customTitle: "Aula 06 - Bronquiolite Viral Aguda" },
                                { url: "https://drive.google.com/file/d/1zXfvTe9abj6VhKmd3XwC9-ywjOYEYj4D/view?usp=sharing", customTitle: "Aula 07 - Coqueluche" },
                                { url: "https://drive.google.com/file/d/1z_HTFDEltxoymt3N2C3qOsp3uypArCCI/view?usp=sharing", customTitle: "Aula 08 - Epiglotite e Laringotraqueíte" },
                                { url: "https://drive.google.com/file/d/1z_cfbSXDSLBPTXCBsSu7Yhs2MB9NMUXu/view?usp=sharing", customTitle: "Aula 09 - Pneumonias na Infância" },
                                { url: "https://drive.google.com/file/d/1zYbyE6tu74AtsDZqWbYW9OTyiN2GQFbJ/view?usp=sharing", customTitle: "Aula 10 - Pneumonias por Microrganismos Atípicos" },
                                { url: "https://drive.google.com/file/d/1zZlTyxzqMinCeA0o5n5178zDmHcssHxs/view?usp=sharing", customTitle: "Aula 11 - Pneumonias Complicadas" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1zJHg3MjBtWP4Fnk5C0IOuQ2inCz8TfCf/view?usp=drive_link", customTitle: "Apostila - Doenças Respiratórias I: IRA" }],
                            aulasBonus: []
                        }
                    },
                    {
                        title: "Doenças Respiratórias II",
                        shortcode: "DRESPII",
                        subtitle: "",
                        contentCounts: { aulas: 7, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1z0sxo6WapZ4VuHuHbZ2G2O3Smhj6Jd-F/view?usp=sharing", customTitle: "Aula 01 - Tuberculose: Conceitos Gerais" },
                                { url: "https://drive.google.com/file/d/1z0l5hLNqXlzp8CDCTDpXGefhu4cDsFMT/view?usp=sharing", customTitle: "Aula 02 - Tuberculose: Diagnóstico" },
                                { url: "https://drive.google.com/file/d/1z0V1lCDCIQdza2Io7f0VeTPvtb2mpoNC/view?usp=sharing", customTitle: "Aula 03 - Tuberculose: Exames Complementares" },
                                { url: "https://drive.google.com/file/d/1z11l-g5p_ZiBf9Y2O9BZcJvD32PG9jtm/view?usp=sharing", customTitle: "Aula 04 - Tuberculose: Formas Extrapulmonares" },
                                { url: "https://drive.google.com/file/d/1z0r0kJ0DAi2ir_TsznkPEeBG6ylcgDO3/view?usp=sharing", customTitle: "Aula 05 - Tuberculose: Controle da Doença - Parte I" },
                                { url: "https://drive.google.com/file/d/1z0zyAv4-U0TpDKCraRq17SUFXQ9Mb25K/view?usp=sharing", customTitle: "Aula 06 - Tuberculose: Controle da Doença - Parte II" },
                                { url: "https://drive.google.com/file/d/1z0f_IlveCRrjkuf2tn2dwKzHJDA7JdpJ/view?usp=sharing", customTitle: "Aula 07 - Tuberculose: Tratamento" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1zI_WB9qV24mXxK7zl7_Gnr3uLIpayBo2/view?usp=drive_link", customTitle: "Apostila - Doenças Respiratórias II: Tuberculose" }],
                            aulasBonus: []
                        }
                    },
                    {
                        title: "Doenças Respiratórias III",
                        shortcode: "DRESPIII",
                        subtitle: "",
                        contentCounts: { aulas: 8, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/11feflPTi0Ld4BizjF9cwYHFTLpHMUU3Z/view?usp=sharing", customTitle: "Aula 01 - Asma: Diagnóstico e Manejo Ambulatorial" },
                                { url: "https://drive.google.com/file/d/11b7_wYuErdeKEn_uzpW13URu-9MxnDM5/view?usp=sharing", customTitle: "Aula 02 - Asma: Tratamento Ambulatorial" },
                                { url: "https://drive.google.com/file/d/11UdV8FakKlh8yKQVzCIWJR-mDHxQs7rp/view?usp=sharing", customTitle: "Aula 03 - Asma: Diagnóstico e Manejo das Exacerbações" },
                                { url: "https://drive.google.com/file/d/11Pvc9NNVVMYl0yyCYrPSpvJqcgRb1e7N/view?usp=sharing", customTitle: "Aula 04 - Insuficiência Respiratória: Conceitos Iniciais" },
                                { url: "https://drive.google.com/file/d/11hvsELSGqfHNLYiAqgoJJaJtrjs-kU1T/view?usp=sharing", customTitle: "Aula 05 - PARDS e Doenças Obstrutivas" },
                                { url: "https://drive.google.com/file/d/11Udg0Kk_CLVXAAzv3VSU7xlXjvybWQnc/view?usp=sharing", customTitle: "Aula 06 - Suporte Não-Invasivo" },
                                { url: "https://drive.google.com/file/d/11j7cFxxJpyR0A_8NK3vp3VFJfsj6CFWb/view?usp=sharing", customTitle: "Aula 07 - Intubação e Farmacologia" },
                                { url: "https://drive.google.com/file/d/11UiYV-x-4d55XXpy-mI93_STj4WQ0Tp3/view?usp=sharing", customTitle: "Aula 08 - Ventilação Mecânica Invasiva: Conceitos básicos" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/12cEJCAhFMG0jRMD_QTobN0j9WU6084XI/view?usp=drive_link", customTitle: "Apostila - Doenças Respiratórias III: Asma e Outras Causas de Sibilância na Infância" }],
                            aulasBonus: []
                        }
                    },
                    {
                        title: "Doenças Respiratórias IV",
                        shortcode: "DRESPIV",
                        subtitle: "",
                        contentCounts: { aulas: 4, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/146WtEX_cm5gGYYTjx1E25z0PnuRRFTsV/view?usp=sharing", customTitle: "Aula 01 - Discinesia Ciliar Primária e Malformações Pulmonares Congênitas" },
                                { url: "https://drive.google.com/file/d/142c3IJbMTPUtYKv10yCgqGk6yIdaCDI2/view?usp=sharing", customTitle: "Aula 02 - Fibrose Cística: Parte I" },
                                { url: "https://drive.google.com/file/d/145mOMzmAhjGMFZGLA5Eb7kLbEI8Ts94Y/view?usp=sharing", customTitle: "Aula 03 - Fibrose Cística: Parte II" },
                                { url: "https://drive.google.com/file/d/14Fnn1pLQANF4IuZZvmHnX9LLdXFt54pj/view?usp=sharing", customTitle: "Aula 04 - Micoses Pulmonares" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/13Ik80dA4_0HFGU4FE382sOLO1OvbxvOi/view?usp=drive_link", customTitle: "Apostila - Doenças Respiratórias IV: Fibrose Cística e Outras Condições Crônicas" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Nefrologia Pediátrica",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Nefrologia Pediátrica I",
                        shortcode: "NEFP I",
                        subtitle: "",
                        contentCounts: { aulas: 5, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1Gyqeq1jP95H8R6Qs8jWI-8k9yiNV5f1p/view?usp=sharing", customTitle: "Aula 01 - Lesão Renal Aguda" },
                                { url: "https://drive.google.com/file/d/1GpeFwhto0js_Av6uMQfSv2Gsk2nBfYqp/view?usp=sharing", customTitle: "Aula 02 - Síndrome Hemolítico-Urêmica" },
                                { url: "https://drive.google.com/file/d/1Gq5oIkp-uLZw-gTKBQFzughe6HeTRED_/view?usp=sharing", customTitle: "Aula 03 - Síndrome Nefrítica" },
                                { url: "https://drive.google.com/file/d/1H1ZNV3NYhb1zoDMX8pKJrMiEQo8jKCtT/view?usp=sharing", customTitle: "Aula 04 - Síndrome Nefrótica" },
                                { url: "https://drive.google.com/file/d/1GqzwdA3KsHh8RXUm0k776uSZkC2bLxez/view?usp=sharing", customTitle: "Aula 05 - Doença Renal Crônica" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1GagRhSkXj-k03Xv9Smvib8034_SNvgoh/view?usp=drive_link", customTitle: "Apostila - Nefrologia Pediátrica I: Síndromes Glomerulares e Lesão Renal Aguda" }],
                            aulasBonus: []
                        }
                    },
                    {
                        title: "Nefrologia Pediátrica II",
                        shortcode: "NEFP II",
                        subtitle: "",
                        contentCounts: { aulas: 7, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/17-2Ue0atKlQulYs9YUCBOGE6XwSP9evW/view?usp=sharing", customTitle: "Aula 01 - Malformações Congênitas" },
                                { url: "https://drive.google.com/file/d/16l9AqzC2wj6yM7mhEzLKYSYxp9adqvXr/view?usp=sharing", customTitle: "Aula 02 - Hidronefrose Fetal" },
                                { url: "https://drive.google.com/file/d/16nIqWKVV0_kf1EcphKSCZQz99u2mvimB/view?usp=sharing", customTitle: "Aula 03 - Infecção do Trato Urinário" },
                                { url: "https://drive.google.com/file/d/16leyv1S72YqmZPLwffiibfe0sU8qLrM-/view?usp=sharing", customTitle: "Aula 04 - Nefrolitíase e Urolitíase" },
                                { url: "https://drive.google.com/file/d/16YLxYr-qiFRs7MPTlDtzP3cpxhrGvnz2/view?usp=sharing", customTitle: "Aula 05 - Bexiga Neurogênica" },
                                { url: "https://drive.google.com/file/d/16zglnpDgt7P3DesG0F25VeNmDkwwbzPZ/view?usp=sharing", customTitle: "Aula 06 - Distúrbio da Micção: Bexiga Hiperativa" },
                                { url: "https://drive.google.com/file/d/16n6sD249g_iof4L0jbDSHGxn4oFxuDul/view?usp=sharing", customTitle: "Aula 07 - Enurese" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/16YZnwST6V-vQBzO0Bpc6rfrZpCZ3aPng/view?usp=drive_link", customTitle: "Apostila - Nefrologia Pediátrica II: Outros Distúrbios Renais e Urológicos" }],
                            aulasBonus: []
                        }
                    },
                    {
                        title: "Nefrologia Pediátrica III",
                        shortcode: "NEFPIII",
                        subtitle: "",
                        contentCounts: { aulas: 5, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1CZv4TjMf65de8G0EKR-cBg6nruVs6zcB/view?usp=sharing", customTitle: "Aula 01 - Interpretação da Gasometria" },
                                { url: "https://drive.google.com/file/d/1CaWSRTkylMGooV3BGc1ZkO9fH6briY_0/view?usp=sharing", customTitle: "Aula 02 - Acidose Metabólica" },
                                { url: "https://drive.google.com/file/d/1CeYYHX42BSBJhe4I07krdq9V0ybRvSUL/view?usp=sharing", customTitle: "Aula 03 - Alcalose Metabólica" },
                                { url: "https://drive.google.com/file/d/1CWmZg57EZXaXkEc5lJ9bfX4W8Z_MKHf7/view?usp=sharing", customTitle: "Aula 04 - Distúrbios do Potássio" },
                                { url: "https://drive.google.com/file/d/1CWgT2hwtfTgx-Lnyf4TErMsAm6hPTdrv/view?usp=sharing", customTitle: "Aula 05 - Distúrbios do Sódio" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1CsnA7-I4-rBgoA7jRCidNNzsjUT026mL/view?usp=drive_link", customTitle: "Apostila - Nefrologia Pediátrica III: Distúrbios Hidroeletrolíticos e Acidobásicos" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Reumatologia Pediátrica",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Doenças Reumáticas",
                        shortcode: "REUP",
                        subtitle: "",
                        contentCounts: { aulas: 6, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1IkPJRkgDRDF9XhCgnf_ecCbElo5AL1-6/view?usp=sharing", customTitle: "Aula 01 - Febre Reumática" },
                                { url: "https://drive.google.com/file/d/1IcSRQodi5lBCyrx0bwqglBpHW1Gn_HLu/view?usp=sharing", customTitle: "Aula 02 - Artrites Idiopáticas Juvenis" },
                                { url: "https://drive.google.com/file/d/1Ig42Rx2WqbeI24OEo1Asip6D3rpettzL/view?usp=sharing", customTitle: "Aula 03 - Doença de Kawasaki" },
                                { url: "https://drive.google.com/file/d/1Ikui_8yoWZzHI8BETl9MFnXZgx6wcpuD/view?usp=sharing", customTitle: "Aula 04 - Púrpura de Henoch-Schönlein" },
                                { url: "https://drive.google.com/file/d/1Ih5PbP5MQKhROBE-hIvBu08e3m91cmgS/view?usp=sharing", customTitle: "Aula 05 - Dermatomiosite Juvenil" },
                                { url: "https://drive.google.com/file/d/1IiAyhtkpXR7EAXlFuTTokXA4h3EAYQip/view?usp=sharing", customTitle: "Aula 06 - Lúpus Eritematoso Sistêmico Juvenil" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1IM2Bjv09IPKAqAHmU_D33Atdey4I0K2M/view?usp=drive_link", customTitle: "Apostila - Reumatologia Pediátrica: Principais Colagenoses, Principais Vasculites, AIJ, Febre Reumática" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Ortopedia",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Ortopedia",
                        shortcode: "ORTO",
                        subtitle: "",
                        contentCounts: { aulas: 8, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1Fqv3tBqBlpjdyYuQuKZz5U82XIIIwMcT/view?usp=sharing", customTitle: "Aula 01 - Dor do Crescimento" },
                                { url: "https://drive.google.com/file/d/1FuAVcLAzLEIy8a0oAK94_SGuMmTO4sUp/view?usp=sharing", customTitle: "Aula 02 - Artrite Séptica" },
                                { url: "https://drive.google.com/file/d/1GLSJeXKJ1qyzo7xi8iRimQa5u8lVYSK_/view?usp=sharing", customTitle: "Aula 03 - Displasia do Desenvolvimento do Quadril" },
                                { url: "https://drive.google.com/file/d/1Fhr3FYP5hPLtPpxcVcRgqSkNL4efnAjD/view?usp=sharing", customTitle: "Aula 04 - Osteomielite" },
                                { url: "https://drive.google.com/file/d/1Gf1wXf9gBYEQPdEjunFaMQ0BFP8HkgGT/view?usp=sharing", customTitle: "Aula 05 - Patologias dos Membros Inferiores" },
                                { url: "https://drive.google.com/file/d/1GQ7_uZGM6tP4eDTm_ofxjPT3GPVZBxvQ/view?usp=sharing", customTitle: "Aula 06 - Patologias dos Membros Superiores" },
                                { url: "https://drive.google.com/file/d/1FuQ8L3ckq3bP1FY_GiQ_U1nY-8krwiPd/view?usp=sharing", customTitle: "Aula 07 - Tumores Ósseos" },
                                { url: "https://drive.google.com/file/d/1Fo8pSYEjCw5HkF_ngDmTMIMQVQACZrPl/view?usp=sharing", customTitle: "Aula 08 - Patologias do Quadril" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1vF3qHnYM2iQaxpI8oA9ICBonK6hztPEr/view?usp=drive_link", customTitle: "Apostila - Ortopedia" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Condições Cirúrgicas da Criança e do Adolescente",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Cond. Cir. da Crian/Adol.",
                        shortcode: "CIRCA",
                        subtitle: "",
                        contentCounts: { aulas: 12, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1Vyc6srHnLqFcX_X-ZTWcIOV_ep48WqnZ/view?usp=sharing", customTitle: "Aula 01 - Afecções Cervicais" },
                                { url: "https://drive.google.com/file/d/1Vb65pILOLFPax0QwSL5QAXZ5_p7tOD3l/view?usp=sharing", customTitle: "Aula 02 - Afecções da Parede Abdominal: Hérnia na Infância" },
                                { url: "https://drive.google.com/file/d/1VTxazAnCd-VWaXEr2UcgGGkCQ_VsWeWg/view?usp=sharing", customTitle: "Aula 03 - Defeitos da Parede Torácica" },
                                { url: "https://drive.google.com/file/d/1VMFMTrTflSuyn2p7hxJi4s9J19kk-fzy/view?usp=sharing", customTitle: "Aula 04 - Aganglionose Intestinal Congênita: Doença de Hirschsprung" },
                                { url: "https://drive.google.com/file/d/1VhCts-dyy0DziAYuViSxw7s3g3Iu96Fs/view?usp=sharing", customTitle: "Aula 05 - Intussuscepção Intestinal" },
                                { url: "https://drive.google.com/file/d/1W5nSsgo39vnN-Khy2IxE1t5F6tg1CgmL/view?usp=sharing", customTitle: "Aula 06 - Enterocolite Necrosante" },
                                { url: "https://drive.google.com/file/d/1W3pnUUprDyedvRAFM7myJyo3b9cpSZPf/view?usp=sharing", customTitle: "Aula 07 - Criptorquidia" },
                                { url: "https://drive.google.com/file/d/1VwIzXROmLJ_cIzyc2Xk-ZPOs2WKgf-wJ/view?usp=sharing", customTitle: "Aula 08 - Escroto Agudo" },
                                { url: "https://drive.google.com/file/d/1VPdPVnM8RD0lpXNF5B51zog7zKiBMoFZ/view?usp=sharing", customTitle: "Aula 09 - Estenose Hipertrófica do Piloro e Atresia Duodenal" },
                                { url: "https://drive.google.com/file/d/1W1RS5NyYgLJ9TMO-Y20ijyvPZenGFXgD/view?usp=sharing", customTitle: "Aula 10 - Fimose" },
                                { url: "https://drive.google.com/file/d/1W59rcXklsR4xcd9zwl0nm5ND-OsfFDk3/view?usp=sharing", customTitle: "Aula 11 - Hérnia Diafragmática Congênita" },
                                { url: "https://drive.google.com/file/d/1V_wm4D4qeAKXj30GNyjJbPWHdVyZMmP7/view?usp=sharing", customTitle: "Aula 12 - Intussuscepção" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1T2-cH-9jgGdAjHF8taA-w__5XotfbNaW/view?usp=drive_link", customTitle: "Apostila - Condições Cirúrgicas da Criança e do Adolescente" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Nutrologia Pediátrica",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Nutrologia Pediátrica I",
                        shortcode: "NUTI",
                        subtitle: "",
                        contentCounts: { aulas: 3, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1AFawe7ELFR1pDuLlWnjrg_gPROe1xB87/view?usp=sharing", customTitle: "Aula 01 - Carência de Micronutrientes" },
                                { url: "https://drive.google.com/file/d/1A72R-qdmf_hhJFdyeoCGtI0lo_OXhbJj/view?usp=sharing", customTitle: "Aula 02 - Desnutrição" },
                                { url: "https://drive.google.com/file/d/1AFchWnJ75PN3SlreEMMp0K2MOL6QZYc7/view?usp=sharing", customTitle: "Aula 03 - Obesidade" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/17yMtJOCS9EaDnGf3Snp61DyIHc2Dq5vl/view?usp=drive_link", customTitle: "Apostila - Nutrologia Pediátrica I: Obesidade e Desnutrição" }],
                            aulasBonus: []
                        }
                    },
                    {
                        title: "Nutrologia Pediátrica II",
                        shortcode: "NUTII",
                        subtitle: "",
                        contentCounts: { aulas: 4, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1DYxI8yhotPv6LOLgyBCr-ydo_OoosQZy/view?usp=sharing", customTitle: "Aula 01 - Erros Inatos do Metabolismo: Conceitos Básicos" },
                                { url: "https://drive.google.com/file/d/1DcNVMUjQcTn-BKcX7d4X6fHnnNhPC1Hk/view?usp=sharing", customTitle: "Aula 02 - Erros Inatos do Metabolismo: Dislipidemias" },
                                { url: "https://drive.google.com/file/d/1DYkITHzAVjKVtMaTPRvnZbakxCFLplM7/view?usp=sharing", customTitle: "Aula 03 - Erros Inatos do Metabolismo: Classificação - Parte I" },
                                { url: "https://drive.google.com/file/d/1Dewhs5ch9kkwYHhoI8DoaHpCJQo_EN8i/view?usp=sharing", customTitle: "Aula 04 - Erros Inatos do Metabolismo: Classificação - Parte II" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1EvFhFsFnsyYt4cuVM0a-zdKzQjedS0GJ/view?usp=drive_link", customTitle: "Apostila - Nutrologia Pediátrica II: Erros do Metabolismo" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Ginecologia",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Ginecologia",
                        shortcode: "GINP",
                        subtitle: "",
                        contentCounts: { aulas: 1, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [{ url: "https://drive.google.com/file/d/16X_zoq17607fFWF03D1wnM_ZTogdGJ4g/view?usp=drive_link", customTitle: "Aula 01 - Violência Sexual" }],
                            apostilas: [{ url: "https://drive.google.com/file/d/16SDIpfgzCcHqG9frjBdQ1REaC-Htz7QY/view?usp=drive_link", customTitle: "Apostila - Ginecologia" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Pediatria Hospitalar",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Pediatria Hospitalar",
                        shortcode: "PEDHOSP",
                        subtitle: "",
                        contentCounts: { aulas: 5, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1grtHVvTojkvNqIchcDIH2VuVzNVhYCdC/view?usp=sharing", customTitle: "Aula 01 - Prevenção de Doenças em Crianças Internadas" },
                                { url: "https://drive.google.com/file/d/1gShUPpjaXX8u2jwXya2mStXu91eIUwIy/view?usp=sharing", customTitle: "Aula 02 - Eventos Súbitos em Pediatria" },
                                { url: "https://drive.google.com/file/d/1gPzFQE8Y-kYtPI5DyVbvKtFPLyN7TXvI/view?usp=sharing", customTitle: "Aula 03 - Dor em Pediatria" },
                                { url: "https://drive.google.com/file/d/1gZ7rPywT6ttA4i_JZKPd7g7jMAgdfDdt/view?usp=sharing", customTitle: "Aula 04 - Cuidados Paliativos" },
                                { url: "https://drive.google.com/file/d/1gbvfvyorryeFOqbP1yAaOzzTmw1YUuch/view?usp=sharing", customTitle: "Aula 05 - Aspectos Éticos" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1fNP2Q327raLeBJEbcxaeGNNNBGxfpH82/view?usp=drive_link", customTitle: "Apostila - Pediatria Hospitalar" }],
                            aulasBonus: []
                        }
                    }
                ]
            },
            {
                name: "Oncopediatria",
                icon: gradientClasses[gradientIconIndex++ % 20],
                modules: [
                    {
                        title: "Oncopediatria I",
                        shortcode: "ONCOPI",
                        subtitle: "",
                        contentCounts: { aulas: 3, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1w3BsmmKFk_NQyH-Rox2DCsNuiky-USM4/view?usp=drive_link", customTitle: "Aula 01 - Tumor Desmoide" },
                                { url: "https://drive.google.com/file/d/13vIncJp4-yK23iY5NjIyKJe4vQ_7iKPL/view?usp=drive_link", customTitle: "Aula 02 - Neuroblastoma" },
                                { url: "https://drive.google.com/file/d/1YE0UnBOoUvoabcTGEuNVojMLQwlCDTJ6/view?usp=drive_link", customTitle: "Aula 03 - Hepatoblastoma" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1h7i3OB_qoo5A4zVJvoRBzaxdrJI3nqYt/view?usp=drive_link", customTitle: "Apostila - Oncopediatria I: Tumores Sólidos - Parte I" }],
                            aulasBonus: []
                        }
                    },
                    {
                        title: "Oncopediatria II",
                        shortcode: "ONCOPII",
                        subtitle: "",
                        contentCounts: { aulas: 1, apostilas: 1, aulasBonus: 0 },
                        contentLinks: {
                            aulas: [
                                { url: "https://drive.google.com/file/d/1-EntLTuc0GW9954kCp-7BgsPlUU4G3zs/view?usp=drive_link", customTitle: "Aula 01 - Retinoblastoma" }
                            ],
                            apostilas: [{ url: "https://drive.google.com/file/d/1-xh0Ayex64NeDZ_Zk1unHGg160K-SY_n/view?usp=drive_link", customTitle: "Apostila - Oncopediatria II: Tumores Sólidos - Parte II" }],
                            aulasBonus: []
                        }
                    }
                ]
            }
        ];
        
        const modulesDataRaw = [];
        newSpecialtiesWithModules.forEach(specData => {
            specData.modules.forEach(modData => { 
                modulesDataRaw.push({
                    specialty: specData.name, 
                    shortcode: modData.shortcode, 
                    title: modData.title, 
                    subtitle: specData.name, 
                    contentCounts: modData.contentCounts, 
                    iconType: specData.icon, 
                    contentLinks: modData.contentLinks 
                });
            });
        });

        const specialtyOrder = newSpecialtiesWithModules.map(s => s.name); 
        const modulesData = modulesDataRaw.map(mod => createModule( mod.specialty, mod.shortcode, mod.title, mod.subtitle, mod.contentCounts, mod.iconType, mod.contentLinks ));
        
        // --- UI Rendering and Event Handling (rest of the script remains the same) ---
        function clearTopicsMenu(message = 'Nenhum tópico disponível.') {
            topicsListUl.innerHTML = '';
            noTopicsMessage.textContent = message;
            noTopicsMessage.classList.remove('hidden');
            topicsMenuDiv.classList.add('hidden');      
            toggleTopicsButton.classList.add('hidden'); 
            topicsIconOpen.classList.remove('hidden');
            topicsIconClose.classList.add('hidden');
        }

        function populateTopicsMenu(topics, isYouTube = false, playerInstance = null) { 
            topicsListUl.innerHTML = '';
            const currentPlayerInstance = playerInstance; 
            console.log("Populating topics. isYouTube:", isYouTube, "Player instance for click:", currentPlayerInstance);

            if (topics && topics.length > 0) {
                topics.forEach(topic => {
                    const li = document.createElement('li');
                    li.className = 'topics-item'; 
                    
                    const topicTitleContainer = document.createElement('div');
                    topicTitleContainer.className = 'topic-title-container';

                    const playIconSvg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                    playIconSvg.setAttribute('class', 'play-icon');
                    playIconSvg.setAttribute('viewBox', '0 0 20 20');
                    playIconSvg.setAttribute('fill', 'currentColor'); 
                    playIconSvg.innerHTML = `<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />`;
                    
                    const titleSpan = document.createElement('span');
                    titleSpan.className = 'topic-title';
                    titleSpan.textContent = topic.title;

                    topicTitleContainer.appendChild(playIconSvg);
                    topicTitleContainer.appendChild(titleSpan);
                    
                    const timeSpan = document.createElement('span');
                    timeSpan.className = 'topic-time';
                    timeSpan.textContent = topic.time;

                    li.appendChild(topicTitleContainer);
                    li.appendChild(timeSpan);

                    if (isYouTube && currentPlayerInstance && typeof currentPlayerInstance.seekTo === 'function') { 
                        console.log("Making topic clickable:", topic.title, "with player:", currentPlayerInstance);
                        li.classList.add('clickable');
                        li.addEventListener('click', () => {
                            console.log("Topic clicked:", topic.title, "Attempting to use player:", currentPlayerInstance);
                            const seconds = parseTimeToSeconds(topic.time);
                            if (currentPlayerInstance && typeof currentPlayerInstance.seekTo === 'function' && typeof currentPlayerInstance.playVideo === 'function') {
                                currentPlayerInstance.seekTo(seconds, true); 
                                currentPlayerInstance.playVideo(); 
                            } else {
                                console.warn("Player instance was not valid or ready at time of click for topic:", topic.title);
                            }
                        });
                    } else if (isYouTube) {
                         console.log("Topic NOT clickable (YouTube video, but player invalid/not ready at this stage):", topic.title, "Player:", currentPlayerInstance);
                    }
                    topicsListUl.appendChild(li);
                });
                noTopicsMessage.classList.add('hidden');
                toggleTopicsButton.classList.remove('hidden'); 
            } else {
                clearTopicsMenu(isYouTube ? 'Nenhum tópico definido para esta aula.' : 'Nenhum tópico disponível para este material.');
            }
        }

        function displayModuleDetails(module) {
            materialsHeader.textContent = `Módulo - ${module.title}`; 
            detailsContentList.innerHTML = ''; 
            
            destroyYouTubePlayer(); 
            playerDiv.classList.add('hidden');
            gDriveViewer.src = 'about:blank'; 
            gDriveViewer.classList.add('hidden');

            topicsMenuDiv.classList.add('hidden'); 
            toggleTopicsButton.classList.add('hidden');
            topicsIconOpen.classList.remove('hidden'); 
            topicsIconClose.classList.add('hidden');   

            const initialMessage = detailsContentList.querySelector('.initial-details-message');
            if(initialMessage) initialMessage.remove(); 

            if (module.contentCounts.aulas === 0 && module.contentCounts.apostilas === 0 && module.contentCounts.aulasBonus === 0) {
                 detailsContentList.innerHTML = '<p class="text-gray-400">Nenhum material cadastrado para este módulo.</p>';
                 return;
            }

            let hasContentToList = false; 
            let firstPlayableItemDiv = null; 
            
            subItemOrder.forEach(contentTypeKey => { 
                const items = module.content[contentTypeKey]; 
                const countForType = module.contentCounts[contentTypeKey];

                if (countForType > 0 && items && items.length > 0) { 
                    hasContentToList = true;
                    const sectionTitle = document.createElement('h4');
                    sectionTitle.className = 'text-xs font-semibold text-gray-400 mt-3 mb-1 uppercase tracking-wider';
                    const displayContentType = contentTypeKey === 'aulasBonus' ? 'Aulas Bônus' : contentTypeKey.charAt(0).toUpperCase() + contentTypeKey.slice(1);
                    sectionTitle.textContent = displayContentType;
                    detailsContentList.appendChild(sectionTitle);

                    items.forEach(item_data => { 
                        const itemNode = contentItemTemplate.content.cloneNode(true);
                        const itemDiv = itemNode.querySelector('.content-item');
                        const titleSpan = itemNode.querySelector('.content-title');
                        titleSpan.textContent = item_data.title; 

                        itemDiv.setAttribute('data-url', item_data.url || '#'); 
                        itemDiv.setAttribute('data-type', item_data.type || 'gdrive'); 
                        itemDiv.dataset.topics = JSON.stringify(item_data.topics || []); 

                        const iconSvgContainer = document.createElement('span');
                        if (contentIcons[contentTypeKey.toLowerCase()]) {
                            iconSvgContainer.innerHTML = contentIcons[contentTypeKey.toLowerCase()];
                            titleSpan.parentNode.insertBefore(iconSvgContainer.firstChild, titleSpan);
                        }
                        
                        if (!firstPlayableItemDiv && item_data.url && item_data.url !== '#' && !item_data.url.startsWith("ID_YOUTUBE_") && !item_data.url.startsWith("LINK_GOOGLE_DRIVE_") ) { 
                            firstPlayableItemDiv = itemDiv;
                        }

                        itemDiv.addEventListener('click', () => {
                            const url = itemDiv.getAttribute('data-url');
                            const type = itemDiv.getAttribute('data-type');
                            const storedTopics = JSON.parse(itemDiv.dataset.topics);

                            if(activeContentItem) activeContentItem.classList.remove('active-content');
                            itemDiv.classList.add('active-content');
                            activeContentItem = itemDiv;

                            topicsMenuDiv.classList.add('hidden'); 
                            topicsIconOpen.classList.remove('hidden'); 
                            topicsIconClose.classList.add('hidden');   

                            if (url && url !== '#') {
                                if (url.startsWith("ID_YOUTUBE_") || url.startsWith("LINK_GOOGLE_DRIVE_")) { 
                                    destroyYouTubePlayer();
                                    playerDiv.classList.add('hidden');
                                    gDriveViewer.classList.remove('hidden');
                                    gDriveViewer.srcdoc = `<div style='color: #a0aec0; display:flex; justify-content:center; align-items:center; height:100%; font-family: Inter, sans-serif;'>Substitua o placeholder '${url}' pela URL real do conteúdo.</div>`;
                                    if (storedTopics && storedTopics.length > 0) {
                                       populateTopicsMenu(storedTopics, type === 'youtube', null); 
                                    } else {
                                       clearTopicsMenu('URL do conteúdo não definida.');
                                    }
                                } else if (type === 'youtube') { 
                                    loadYouTubeVideo(url, storedTopics); 
                                } else if (type === 'gdrive') { 
                                    destroyYouTubePlayer(); 
                                    playerDiv.classList.add('hidden');
                                    gDriveViewer.src = url; 
                                    gDriveViewer.classList.remove('hidden');
                                    if (storedTopics && storedTopics.length > 0) { 
                                        populateTopicsMenu(storedTopics, false, null); 
                                    } else {
                                        clearTopicsMenu('Tópicos não aplicáveis ou não definidos para este material.');
                                    }
                                }
                            } else { 
                                destroyYouTubePlayer();
                                playerDiv.classList.add('hidden');
                                gDriveViewer.srcdoc = `<div style='color: #a0aec0; display:flex; justify-content:center; align-items:center; height:100%; font-family: Inter, sans-serif;'>Link não disponível ou inválido.</div>`;
                                gDriveViewer.classList.remove('hidden');
                                clearTopicsMenu('Link não disponível.');
                            }
                        });
                        detailsContentList.appendChild(itemNode);
                    });
                }
            });

            if (!hasContentToList) { 
                 detailsContentList.innerHTML = '<p class="text-gray-400">Nenhum material encontrado para este módulo.</p>';
            }
            
            if (firstPlayableItemDiv) {
                setTimeout(() => { firstPlayableItemDiv.click(); }, 0); 
            } else if (hasContentToList) { 
                destroyYouTubePlayer();
                playerDiv.classList.add('hidden');
                gDriveViewer.srcdoc = `<div style='color: #a0aec0; display:flex; justify-content:center; align-items:center; height:100%; font-family: Inter, sans-serif;'>Selecione um material da lista. Nenhum item com link real para autoplay.</div>`;
                gDriveViewer.classList.remove('hidden');
                clearTopicsMenu('Selecione um material.'); 
            } else { 
                destroyYouTubePlayer();
                playerDiv.classList.add('hidden');
                gDriveViewer.srcdoc = `<div style='color: #a0aec0; display:flex; justify-content:center; align-items:center; height:100%; font-family: Inter, sans-serif;'>Nenhum conteúdo para este módulo.</div>`;
                gDriveViewer.classList.remove('hidden');
                clearTopicsMenu('Nenhum conteúdo.'); 
            }
        }
        
        toggleTopicsButton.addEventListener('click', () => {
            topicsMenuDiv.classList.toggle('hidden');
            topicsIconOpen.classList.toggle('hidden');
            topicsIconClose.classList.toggle('hidden');
        });

        function renderModules(modulesToRender) { 
            modulesListContainer.innerHTML = ''; 
            let isFirstModuleOfList = true; 
            let firstEverClickableModuleCard = null; 

            specialtyOrder.forEach(specialtyName => {
                const modulesInSpecialty = modulesToRender.filter(m => m.specialty === specialtyName);
                
                if (modulesInSpecialty.length > 0 || (searchInput.value && specialtyOrder.includes(specialtyName))) {
                    const specialtyHeaderDiv = document.createElement('div');
                    specialtyHeaderDiv.className = 'specialty-header pt-3';
                    specialtyHeaderDiv.innerHTML = `<span>${specialtyName}</span>`;
                    modulesListContainer.appendChild(specialtyHeaderDiv);
                }

                if (modulesInSpecialty.length > 0) {
                    modulesInSpecialty.forEach(module => {
                        const cardNode = moduleListItemTemplate.content.cloneNode(true);
                        const cardDiv = cardNode.querySelector('.module-list-item');
                        cardDiv.dataset.moduleId = module.id;

                        const displayTitle = module.title; 
                        cardNode.querySelector('.module-title').textContent = displayTitle;

                        const iconPlaceholder = cardNode.querySelector('.module-icon-box');
                        iconPlaceholder.innerHTML = `<span class="text-sm">${module.shortcode || 'M'}</span>`; 
                        iconPlaceholder.className = 'module-icon-box flex-shrink-0'; 
                        if (module.iconType && gradientClasses.includes(module.iconType)) { 
                            iconPlaceholder.classList.add(module.iconType);
                        } else { 
                            iconPlaceholder.classList.add('gradient-gray'); 
                        }
                        
                        cardNode.querySelector('.aulas-count').textContent = module.contentCounts.aulas;
                        cardNode.querySelector('.apostilas-count').textContent = module.contentCounts.apostilas;
                        cardNode.querySelector('.aulasBonus-count').textContent = module.contentCounts.aulasBonus;

                        cardDiv.addEventListener('click', () => {
                            if (activeModuleCard) {
                                activeModuleCard.classList.remove('active');
                            }
                            cardDiv.classList.add('active');
                            activeModuleCard = cardDiv;
                            if(activeContentItem) activeContentItem.classList.remove('active-content'); 
                            activeContentItem = null; 
                            displayModuleDetails(module); 
                        });

                        if (isFirstModuleOfList && modulesToRender.length > 0) { 
                            firstEverClickableModuleCard = cardDiv;
                            isFirstModuleOfList = false;
                        }
                        modulesListContainer.appendChild(cardNode);
                    });
                } else if (searchInput.value && specialtyOrder.includes(specialtyName)){ 
                    const noModulesMsg = document.createElement('p');
                    noModulesMsg.className = 'text-xs text-gray-500 text-center pb-2';
                    noModulesMsg.textContent = 'Nenhum módulo encontrado para esta especialidade com o filtro atual.';
                    modulesListContainer.appendChild(noModulesMsg);
                }
            });
            
            if (firstEverClickableModuleCard) {
                firstEverClickableModuleCard.click(); 
            } else if (modulesToRender.length === 0 && modulesData.length > 0) { 
                materialsHeader.textContent = 'Nenhum módulo encontrado';
                detailsContentList.innerHTML = '<p class="text-gray-400">Tente um termo de pesquisa diferente ou limpe a busca.</p>';
                destroyYouTubePlayer(); playerDiv.classList.add('hidden'); 
                gDriveViewer.srcdoc = `<div style='color: #a0aec0; display:flex; justify-content:center; align-items:center; height:100%; font-family: Inter, sans-serif;'>Nenhum resultado para a busca.</div>`;
                gDriveViewer.classList.remove('hidden');
                if (activeModuleCard) activeModuleCard.classList.remove('active'); activeModuleCard = null;
                if(activeContentItem) activeContentItem.classList.remove('active-content'); activeContentItem = null;
                clearTopicsMenu('Nenhum resultado para a busca.');

            } else if (modulesData.length === 0) { 
                materialsHeader.textContent = 'Nenhum módulo disponível';
                detailsContentList.innerHTML = '<p class="text-gray-400">Nenhum módulo foi configurado na plataforma.</p>';
                destroyYouTubePlayer(); playerDiv.classList.add('hidden'); 
                gDriveViewer.srcdoc = `<div style='color: #a0aec0; display:flex; justify-content:center; align-items:center; height:100%; font-family: Inter, sans-serif;'>Plataforma vazia.</div>`;
                gDriveViewer.classList.remove('hidden');
                clearTopicsMenu('Plataforma vazia.');
            }
        }

        // --- Initial Page Load ---
        renderModules(modulesData);

        if (modulesData.length === 0 && modulesListContainer.children.length === 0 ) { 
            materialsHeader.textContent = 'Nenhum módulo disponível';
            detailsContentList.innerHTML = '<p class="text-gray-400">Adicione módulos para começar.</p>';
            destroyYouTubePlayer(); playerDiv.classList.add('hidden'); 
            gDriveViewer.srcdoc = `<div style='color: #a0aec0; display:flex; justify-content:center; align-items:center; height:100%; font-family: Inter, sans-serif;'>Nenhum módulo cadastrado.</div>`;
            gDriveViewer.classList.remove('hidden');
            clearTopicsMenu('Nenhum módulo cadastrado.');
        }

        // --- Event Listeners ---
        searchInput.addEventListener('input', (e) => { 
            const searchTerm = e.target.value.toLowerCase().trim();
            const filteredModules = modulesData.filter(module =>
                module.title.toLowerCase().includes(searchTerm) ||
                (module.subtitle && module.subtitle.toLowerCase().includes(searchTerm)) || 
                (module.shortcode && module.shortcode.toLowerCase().includes(searchTerm)) ||
                (module.specialty && module.specialty.toLowerCase().includes(searchTerm)) 
            );
            renderModules(filteredModules); 

            if (filteredModules.length === 0) {
                materialsHeader.textContent = 'Nenhum módulo encontrado';
                detailsContentList.innerHTML = '<p class="text-gray-400">Nenhum módulo corresponde à sua pesquisa.</p>';
                destroyYouTubePlayer(); playerDiv.classList.add('hidden'); 
                gDriveViewer.srcdoc = `<div style='color: #a0aec0; display:flex; justify-content:center; align-items:center; height:100%; font-family: Inter, sans-serif;'>Nenhum resultado para a busca.</div>`;
                gDriveViewer.classList.remove('hidden');
                if (activeModuleCard) { activeModuleCard.classList.remove('active'); activeModuleCard = null; }
                if(activeContentItem) { activeContentItem.classList.remove('active-content'); activeContentItem = null; }
                clearTopicsMenu('Nenhum resultado para a busca.');
            }
        });
    </script>
</body>
</html>
